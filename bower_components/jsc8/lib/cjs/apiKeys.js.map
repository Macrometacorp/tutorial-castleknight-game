{"version":3,"file":"apiKeys.js","sourceRoot":"","sources":["../../src/apiKeys.ts"],"names":[],"mappings":"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","sourcesContent":["import { Connection } from \"./connection\";\n\nexport type validateApiKeyHandle = {\n    apikey?: string;\n    jwt?: string;\n}\n\nexport class ApiKeys {\n    private _connection: Connection;\n    keyid: string;\n    dbName: string;\n\n    constructor(connection: Connection, keyid: string = \"\", dbName: string = \"\") {\n        this._connection = connection;\n        this.keyid = keyid;\n        this.dbName = dbName;\n    }\n\n    validateApiKey(data: validateApiKeyHandle) {\n        return this._connection.request(\n            {\n                method: \"POST\",\n                path: \"/_api/key/validate\",\n                body: data\n            },\n            (res) => res.body\n        );\n    }\n\n    createApiKey() {\n        return this._connection.request(\n            {\n                method: \"POST\",\n                path: \"/_api/key\",\n                body: {\n                    keyid: this.keyid\n                }\n            },\n            (res) => res.body\n        );\n    }\n\n    getAvailableApiKeys() {\n        return this._connection.request(\n            {\n                method: \"GET\",\n                path: \"/_api/key\",\n            },\n            (res) => res.body\n        );\n    }\n\n    getAvailableApiKey() {\n        return this._connection.request(\n            {\n                method: \"GET\",\n                path: `/_api/key/${this.keyid}`,\n            },\n            (res) => res.body\n        );\n    }\n\n    removeApiKey() {\n        return this._connection.request(\n            {\n                method: \"DELETE\",\n                path: `/_api/key/${this.keyid}`,\n            },\n            (res) => res.body\n        );\n    }\n\n    //---------------- database access level ----------------\n\n    listAccessibleDatabases(full: boolean = false) {\n        return this._connection.request(\n            {\n                method: \"GET\",\n                path: `/_api/key/${this.keyid}/database`,\n                qs: {\n                    full\n                }\n            },\n            (res) => res.body\n        );\n    }\n\n    getDatabaseAccessLevel() {\n        return this._connection.request(\n            {\n                method: \"GET\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}`,\n            },\n            (res) => res.body\n        );\n    }\n\n    clearDatabaseAccessLevel() {\n        return this._connection.request(\n            {\n                method: \"DELETE\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}`,\n            },\n            (res) => res.body\n        );\n    }\n\n    setDatabaseAccessLevel(permission: \"rw\" | \"ro\" | \"none\") {\n        return this._connection.request(\n            {\n                method: \"PUT\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}`,\n                body: {\n                    grant: permission\n                }\n            },\n            (res) => res.body\n        );\n    }\n    //---------------- Collection access level ----------------\n\n    listAccessibleCollections(full: boolean = false) {\n        return this._connection.request(\n            {\n                method: \"GET\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}/collection`,\n                qs: {\n                    full\n                }\n            },\n            (res) => res.body\n        );\n    }\n\n    getCollectionAccessLevel(collectionName: string) {\n        return this._connection.request(\n            {\n                method: \"GET\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}/collection/${collectionName}`,\n            },\n            (res) => res.body\n        );\n    }\n\n    clearCollectionAccessLevel(collectionName: string) {\n        return this._connection.request(\n            {\n                method: \"DELETE\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}/collection/${collectionName}`,\n            },\n            (res) => res.body\n        );\n    }\n\n    setCollectionAccessLevel(collectionName: string, permission: \"rw\" | \"ro\" | \"none\") {\n        return this._connection.request(\n            {\n                method: \"PUT\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}/collection/${collectionName}`,\n                body: {\n                    grant: permission\n                }\n            },\n            (res) => res.body\n        );\n    }\n\n    //---------------- Stream access level ----------------\n\n    listAccessibleStreams(full: boolean = false) {\n        return this._connection.request(\n            {\n                method: \"GET\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}/stream`,\n                qs: {\n                    full\n                }\n            },\n            (res) => res.body\n        );\n    }\n\n    getStreamAccessLevel(streamName: string) {\n        return this._connection.request(\n            {\n                method: \"GET\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}/stream/${streamName}`,\n            },\n            (res) => res.body\n        );\n    }\n\n    clearStreamAccessLevel(streamName: string) {\n        return this._connection.request(\n            {\n                method: \"DELETE\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}/stream/${streamName}`,\n            },\n            (res) => res.body\n        );\n    }\n\n    setStreamAccessLevel(streamName: string, permission: \"rw\" | \"ro\" | \"none\") {\n        return this._connection.request(\n            {\n                method: \"PUT\",\n                path: `/_api/key/${this.keyid}/database/${this.dbName}/stream/${streamName}`,\n                body: {\n                    grant: permission\n                }\n            },\n            (res) => res.body\n        );\n    }\n\n    //---------------- Billing access level ----------------\n\n    getBillingAccessLevel() {\n        return this._connection.request(\n            {\n                method: \"GET\",\n                path: `/_api/key/${this.keyid}/billing`,\n            },\n            (res) => res.body\n        );\n    }\n\n    clearBillingAccessLevel() {\n        return this._connection.request(\n            {\n                method: \"DELETE\",\n                path: `/_api/key/${this.keyid}/billing`,\n            },\n            (res) => res.body\n        );\n    }\n\n    setBillingAccessLevel(permission: \"rw\" | \"ro\" | \"none\") {\n        return this._connection.request(\n            {\n                method: \"PUT\",\n                path: `/_api/key/${this.keyid}/billing`,\n                body: {\n                    grant: permission\n                }\n            },\n            (res) => res.body\n        );\n    }\n\n}\n"]}