!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jsC8=t():e.jsC8=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return Boolean(e&&e.isC8Error)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(18),u={0:"Network Error",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",444:"Connection Closed Without Response",451:"Unavailable For Legal Reasons",499:"Client Closed Request",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required",599:"Network Connect Timeout Error"},c=["fileName","lineNumber","columnNumber","stack","description","number"];t.isC8Error=a;var l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.name="C8Error",n.isC8Error=!0,n.response=e,n.statusCode=e.statusCode,n.message=e.body.errorMessage,n.errorNum=e.body.errorNum,n.code=e.body.code;var o=new Error(n.message);o.name=n.name;var a=!0,s=!1,u=void 0;try{for(var l,h=c[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var f=l.value;o[f]&&(n[f]=o[f])}}catch(o){s=!0,u=o}finally{try{!a&&h.return&&h.return()}finally{if(s)throw u}}return n}return o(t,e),t}(s.default);t.C8Error=l;var h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.name="HttpError",n.response=e,n.statusCode=e.statusCode||500,n.message=u[n.statusCode]||u[500],n.code=n.statusCode;var o=new Error(n.message);o.name=n.name;var a=!0,s=!1,l=void 0;try{for(var h,f=c[Symbol.iterator]();!(a=(h=f.next()).done);a=!0){var p=h.value;o[p]&&(n[p]=o[p])}}catch(o){s=!0,l=o}finally{try{!a&&f.return&&f.return()}finally{if(s)throw l}}return n}return o(t,e),t}(s.default);t.HttpError=h},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){return Boolean(e&&e.isC8Collection)}function c(e,t){return new(t.type===f.EDGE_COLLECTION?m:y)(e,t.name)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var f,p=n(0),d=n(2);!function(e){e[e.DOCUMENT_COLLECTION=2]="DOCUMENT_COLLECTION",e[e.EDGE_COLLECTION=3]="EDGE_COLLECTION"}(f=t.CollectionType||(t.CollectionType={})),t.isC8Collection=u,t.DOCUMENT_NOT_FOUND=1202,t.COLLECTION_NOT_FOUND=1203;var v=function(){function e(t,n){s(this,e),this.isC8Collection=!0,this.name=n,this._idPrefix=this.name+"/",this._connection=t,this.stream=new d.Stream(t,n,!0,!0),this._connection.c8Major>=3&&(this.createCapConstraint=void 0)}return h(e,[{key:"_documentPath",value:function(e){return"/document/"+this._documentHandle(e)}},{key:"_documentHandle",value:function(e){if("string"!=typeof e){if(e._id)return e._id;if(e._key)return this._idPrefix+e._key;throw new Error("Document handle must be a document or string")}return-1===e.indexOf("/")?this._idPrefix+e:e}},{key:"_indexHandle",value:function(e){if("string"!=typeof e){if(e.id)return e.id;throw new Error("Index handle must be a index or string")}return-1===e.indexOf("/")?this._idPrefix+e:e}},{key:"_get",value:function(e,t){return this._connection.request({path:"/collection/"+this.name+"/"+e,qs:t},function(e){return e.body})}},{key:"_put",value:function(e,t){return this._connection.request({method:"PUT",path:"/collection/"+this.name+"/"+e,body:t},function(e){return e.body})}},{key:"get",value:function(){return this._connection.request({path:"/collection/"+this.name},function(e){return e.body})}},{key:"exists",value:function(){return this.get().then(function(){return!0},function(e){if(p.isC8Error(e)&&e.errorNum===t.COLLECTION_NOT_FOUND)return!1;throw e})}},{key:"create",value:function(e){return this._connection.request({method:"POST",path:"/collection",body:l({},e,{name:this.name,type:this.type})},function(e){return e.body})}},{key:"onChange",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"subs";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stream.getOtp();case 2:return n=e.sent,e.abrupt("return",this.stream.consumer(r,t,{otp:n}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"properties",value:function(){return this._get("properties")}},{key:"count",value:function(){return this._get("count")}},{key:"rename",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._connection.request({method:"PUT",path:"/collection/"+this.name+"/rename",body:{name:t}},function(e){return e.body});case 2:return n=e.sent,this.name=t,this._idPrefix=t+"/",e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"truncate",value:function(){return this._put("truncate",void 0)}},{key:"drop",value:function(e){return this._connection.request({method:"DELETE",path:"/collection/"+this.name,qs:e},function(e){return e.body})}},{key:"documentExists",value:function(e){return this._connection.request({method:"HEAD",path:"/"+this._documentPath(e)},function(){return!0}).catch(function(e){if(404===e.statusCode)return!1;throw e})}},{key:"document",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._connection.request({path:"/"+this._documentPath(e)},function(e){return e.body});return n?r.catch(function(e){if(p.isC8Error(e)&&e.errorNum===t.DOCUMENT_NOT_FOUND)return null;throw e}):r}},{key:"replace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev&&this._connection.c8Major>=3){var i=void 0,a=n;i=a.rev,n=o(a,["rev"]),r["if-match"]=i}return this._connection.request({method:"PUT",path:"/"+this._documentPath(e),body:t,qs:n,headers:r},function(e){return e.body})}},{key:"replaceDocuments",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof t&&(t={rev:t}),t.rev&&this._connection.c8Major>=3){var r=void 0,i=t;r=i.rev,t=o(i,["rev"]),n["if-match"]=r}return this._connection.request({method:"PUT",path:"/"+this._documentPath(""),body:e,qs:t,headers:n},function(e){return e.body})}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev&&this._connection.c8Major>=3){var i=void 0,a=n;i=a.rev,n=o(a,["rev"]),r["if-match"]=i}return this._connection.request({method:"PATCH",path:"/"+this._documentPath(e),body:t,qs:n,headers:r},function(e){return e.body})}},{key:"updateDocuments",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof t&&(t={rev:t}),t.rev&&this._connection.c8Major>=3){var r=void 0,i=t;r=i.rev,t=o(i,["rev"]),n["if-match"]=r}return this._connection.request({method:"PATCH",path:"/"+this._documentPath(""),body:e,qs:t,headers:n},function(e){return e.body})}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof t&&(t={rev:t}),t.rev&&this._connection.c8Major>=3){var r=void 0,i=t;r=i.rev,t=o(i,["rev"]),n["if-match"]=r}return this._connection.request({method:"DELETE",path:"/"+this._documentPath(e),qs:t,headers:n},function(e){return e.body})}},{key:"removeDocuments",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof t&&(t={rev:t}),t.rev&&this._connection.c8Major>=3){var r=void 0,i=t;r=i.rev,t=o(i,["rev"]),n["if-match"]=r}return this._connection.request({method:"DELETE",path:"/"+this._documentPath(""),body:e,qs:t,headers:n},function(e){return e.body})}},{key:"import",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=void 0===n?"auto":n,i=o(t,["type"]);return Array.isArray(e)&&(e=e.map(function(e){return JSON.stringify(e)}).join("\r\n")+"\r\n"),this._connection.request({method:"POST",path:"/import",body:e,isBinary:!0,qs:l({type:null===r?void 0:r},i,{collection:this.name})},function(e){return e.body})}},{key:"indexes",value:function(){return this._connection.request({path:"/index",qs:{collection:this.name}},function(e){return e.body.indexes})}},{key:"index",value:function(e){return this._connection.request({path:"/index/"+this._idPrefix+e},function(e){return e.body})}},{key:"createIndex",value:function(e){return this._connection.request({method:"POST",path:"/index",body:e,qs:{collection:this.name}},function(e){return e.body})}},{key:"dropIndex",value:function(e){return this._connection.request({method:"DELETE",path:"/index/"+this._idPrefix+e},function(e){return e.body})}},{key:"createCapConstraint",value:function(e){return"number"==typeof e&&(e={size:e}),this._connection.request({method:"POST",path:"/index",body:l({},e,{type:"cap"}),qs:{collection:this.name}},function(e){return e.body})}},{key:"createHashIndex",value:function(e,t){return"string"==typeof e&&(e=[e]),"boolean"==typeof t&&(t={unique:t}),this._connection.request({method:"POST",path:"/index",body:l({unique:!1},t,{type:"hash",fields:e}),qs:{collection:this.name}},function(e){return e.body})}},{key:"createSkipList",value:function(e,t){return"string"==typeof e&&(e=[e]),"boolean"==typeof t&&(t={unique:t}),this._connection.request({method:"POST",path:"/index",body:l({unique:!1},t,{type:"skiplist",fields:e}),qs:{collection:this.name}},function(e){return e.body})}},{key:"createPersistentIndex",value:function(e,t){return"string"==typeof e&&(e=[e]),"boolean"==typeof t&&(t={unique:t}),this._connection.request({method:"POST",path:"/index",body:l({unique:!1},t,{type:"persistent",fields:e}),qs:{collection:this.name}},function(e){return e.body})}},{key:"createGeoIndex",value:function(e,t){return"string"==typeof e&&(e=[e]),this._connection.request({method:"POST",path:"/index",body:l({},t,{fields:e,type:"geo"}),qs:{collection:this.name}},function(e){return e.body})}},{key:"createFulltextIndex",value:function(e,t){return"string"==typeof e&&(e=[e]),this._connection.request({method:"POST",path:"/index",body:{fields:e,minLength:t,type:"fulltext"},qs:{collection:this.name}},function(e){return e.body})}},{key:"createTtlIndex",value:function(e,t){return"string"==typeof e&&(e=[e]),this._connection.request({method:"POST",path:"/index",body:{fields:e,expireAfter:t,type:"ttl"},qs:{collection:this.name}},function(e){return e.body})}}]),e}();t.BaseCollection=v;var y=function(e){function t(e,n){s(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.type=f.DOCUMENT_COLLECTION,i}return i(t,e),h(t,[{key:"save",value:function(e,t){return"boolean"==typeof t&&(t={returnNew:t}),this._connection.c8Major<=2?this._connection.request({method:"POST",path:"/document",body:e,qs:l({},t,{collection:this.name})},function(e){return e.body}):this._connection.request({method:"POST",path:"/document/"+this.name,body:e,qs:t},function(e){return e.body})}}]),t}(v);t.DocumentCollection=y;var m=function(e){function t(e,n){s(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.type=f.EDGE_COLLECTION,i}return i(t,e),h(t,[{key:"_documentPath",value:function(e){return this._connection.c8Major<3?"edge/"+this._documentHandle(e):"document/"+this._documentHandle(e)}},{key:"edge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.document(e,t)}},{key:"save",value:function(e,t,n,r){return void 0!==n?(e._from=this._documentHandle(t),e._to=this._documentHandle(n)):void 0!==t&&(r=t),"boolean"==typeof r&&(r={returnNew:r}),this._connection.c8Major<=2?this._connection.request({method:"POST",path:"/edge",body:e,qs:l({},r,{collection:this.name,from:e._from,to:e._to})},function(e){return e.body}):this._connection.request({method:"POST",path:"/document",body:e,qs:l({},r,{collection:this.name})},function(e){return e.body})}},{key:"_edges",value:function(e,t){return this._connection.request({path:"/edges/"+this.name,qs:{direction:t,vertex:this._documentHandle(e)}},function(e){return e.body.edges})}},{key:"edges",value:function(e){return this._edges(e,void 0)}},{key:"inEdges",value:function(e){return this._edges(e,"in")}},{key:"outEdges",value:function(e){return this._edges(e,"out")}},{key:"traversal",value:function(e,t){return this._connection.request({method:"POST",path:"/traversal",body:l({},t,{startVertex:e,edgeCollection:this.name})},function(e){return e.body.result})}}]),t}(v);t.EdgeCollection=m,t.constructCollection=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(20),s=n(21),u=n(25);!function(e){e.PERSISTENT="persistent"}(o=t.StreamConstants||(t.StreamConstants={}));var c=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r(this,e),this._connection=t,this.isCollectionStream=o,this.global=!i,this.name=n;var a=this.name;this.isCollectionStream||(a=this.global?"c8globals."+this.name:"c8locals."+this.name),this.topic=a}return i(e,[{key:"_getPath",value:function(e,t){var n=e?this.name:this.topic;return a.getFullStreamPath(n,t)}},{key:"getOtp",value:function(){return this._connection.request({method:"POST",path:"/apid/otp",absolutePath:!0},function(e){return e.body.otp})}},{key:"createStream",value:function(){return this._connection.request({method:"POST",path:this._getPath(!0),qs:"global="+this.global},function(e){return e.body})}},{key:"backlog",value:function(){return this._connection.request({method:"GET",path:this._getPath(!1,"/backlog"),qs:"global="+this.global},function(e){return e.body})}},{key:"clearBacklog",value:function(){return this._connection.request({method:"POST",path:this._getPath(!1,"/clearbacklog"),qs:"global="+this.global},function(e){return e.body})}},{key:"getStreamStatistics",value:function(){return this._connection.request({method:"GET",path:this._getPath(!1,"/stats"),qs:"global="+this.global},function(e){return e.body})}},{key:"deleteSubscription",value:function(e){var t="/subscription/"+e;return this._connection.request({method:"DELETE",path:this._getPath(!1,t),qs:"global="+this.global},function(e){return e.body})}},{key:"expireMessages",value:function(e){var t="/expiry/"+e;return this._connection.request({method:"POST",path:this._getPath(!1,t),qs:"global="+this.global},function(e){return e.body})}},{key:"clearSubscriptionBacklog",value:function(e){var t="/clearbacklog/"+e;return this._connection.request({method:"POST",path:this._getPath(!1,t),qs:"global="+this.global},function(e){return e.body})}},{key:"getSubscriptionList",value:function(){return this._connection.request({method:"GET",path:this._getPath(!1,"/subscriptions"),qs:"global="+this.global},function(e){return e.body})}},{key:"deleteStream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"DELETE",path:this._getPath(!1),qs:"global="+this.global+"&force="+e},function(e){return e.body})}},{key:"consumer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.toLocaleLowerCase();if(r.includes("http")||r.includes("https"))throw"Invalid DC name";var i=o.PERSISTENT,a=this.global?"c8global":"c8local",c=this._connection.getTenantName(),l=s.stringify(n),h=this._connection.getFabricName();if(!h||!c)throw"Set correct DB and/or tenant name before using.";var f="wss://api-"+t+"/_ws/ws/v2/consumer/"+i+"/"+c+"/"+a+"."+h+"/"+this.topic+"/"+e;return f=f+"?"+l,u.ws(f)}},{key:"producer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw"DC name not provided to establish producer connection";var n=e.toLocaleLowerCase();if(n.includes("http")||n.includes("https"))throw"Invalid DC name";var r=o.PERSISTENT,i=this.global?"c8global":"c8local",a=this._connection.getTenantName(),c=s.stringify(t),l=this._connection.getFabricName();if(!l||!a)throw"Set correct DB and/or tenant name before using.";var h="wss://api-"+e+"/_ws/ws/v2/producer/"+r+"/"+a+"/"+i+"."+l+"/"+this.topic;return h=h+"?"+c,u.ws(h)}},{key:"publishMessage",value:function(e){return this._connection.request({method:"POST",path:this._getPath(!1,"/publish"),qs:"global="+this.global,body:e},function(e){return e.body})}},{key:"getMessageTtl",value:function(){return this._connection.request({method:"GET",path:"/_api/streams/ttl"},function(e){return e.body})}},{key:"setMessageTtl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3600;return this._connection.request({method:"POST",path:"/_api/streams/ttl/"+e},function(e){return e.body})}},{key:"deleteSubscriptions",value:function(e){var t="/subscriptions/"+e;return this._connection.request({method:"DELETE",path:this._getPath(!1,t),qs:"global="+this.global},function(e){return e.body})}}]),e}();t.Stream=c},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return Object.getPrototypeOf(e)===Error.prototype&&e.hasOwnProperty("code")&&e.hasOwnProperty("errno")&&e.hasOwnProperty("syscall")}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var h=n(6),f=n(0),p=n(28),d=n(44),v=n(47);t.MIME_JSON=/\/(json|javascript)(\W|$)/;var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,e),this._activeTasks=0,this._c8Version=3e4,this._fabricName="_system",this._tenantName="_mm",this._queue=new v,this._hosts=[],this._urls=[],"string"==typeof t?t={url:t}:Array.isArray(t)&&(t={url:t}),void 0!==t.c8Version&&(this._c8Version=t.c8Version),t.fabricName&&(this._fabricName=t.fabricName),t.isAbsolute&&(this._fabricName=!1,this._tenantName=!1),this._agent=t.agent,this._agentOptions=p.isBrowser?c({},t.agentOptions):c({maxSockets:3,keepAlive:!0,keepAliveMsecs:1e3},t.agentOptions),this._maxTasks=this._agentOptions.maxSockets||3,this._agentOptions.keepAlive&&(this._maxTasks*=2),this._headers=c({},t.headers),t.token){this._headers=c({},this._headers,{authorization:"Bearer "+t.token});var n=d(t.token),r=n.tenant;this._tenantName=r}t.apiKey&&(this._headers=c({},this._headers,{authorization:"apikey "+t.apiKey}),this._tenantName=this.extractTenantName(t.apiKey)),this._loadBalancingStrategy=t.loadBalancingStrategy||"NONE",this._useFailOver="ROUND_ROBIN"!==this._loadBalancingStrategy,!1===t.maxRetries?(this._shouldRetry=!1,this._maxRetries=0):(this._shouldRetry=!0,this._maxRetries=t.maxRetries||0);var i=t.url?Array.isArray(t.url)?t.url:[t.url]:["https://test.macrometa.io"],a=i.map(function(e){return"https://api-"+e.split("https://")[1]});this.addToHostList(a),"ONE_RANDOM"===this._loadBalancingStrategy?this._activeHost=Math.floor(Math.random()*this._hosts.length):this._activeHost=0}return l(e,[{key:"_runQueue",value:function(){var e=this;if(this._queue.length&&!(this._activeTasks>=this._maxTasks)){var t=this._queue.shift(),n=this._activeHost;void 0!==t.host?n=t.host:"ROUND_ROBIN"===this._loadBalancingStrategy&&(this._activeHost=(this._activeHost+1)%this._hosts.length),this._activeTasks+=1,this._hosts[n](t.options,function(r,i){if(e._activeTasks-=1,r)e._hosts.length>1&&e._activeHost===n&&e._useFailOver&&(e._activeHost=(e._activeHost+1)%e._hosts.length),!t.host&&e._shouldRetry&&t.retries<(e._maxRetries||e._hosts.length-1)&&a(r)&&"connect"===r.syscall&&"ECONNREFUSED"===r.code?(t.retries+=1,e._queue.push(t)):t.reject(r);else if(p.isBrowser&&e._agent){var o=i;if(503===o.status&&o.headers.get("x-c8-endpoint")){var s=o.headers.get("x-c8-endpoint"),c=e.addToHostList(s),l=u(c,1),h=l[0];t.host=h,e._activeHost===n&&(e._activeHost=h),e._queue.push(t)}else o.host=n,t.resolve(o)}else{var f=i;if(503===f.statusCode&&f.headers["x-c8-endpoint"]){var d=f.headers["x-c8-endpoint"],v=e.addToHostList(d),y=u(v,1),m=y[0];t.host=m,e._activeHost===n&&(e._activeHost=m),e._queue.push(t)}else f.host=n,t.resolve(f)}e._runQueue()})}}},{key:"_buildUrl",value:function(e){var t=e.absolutePath,n=void 0!==t&&t,r=e.basePath,i=e.path,o=e.qs,a="",s=void 0;return n||(a=this._fabricPath,r&&(a+=r)),i&&(a+=i),o&&(s="string"==typeof o?"?"+o:"?"+h.stringify(o)),s?{pathname:a,search:s}:{pathname:a}}},{key:"_sanitizeEndpointUrl",value:function(e){return e.startsWith("tcp:")?e.replace(/^tcp:/,"http:"):e.startsWith("ssl:")?e.replace(/^ssl:/,"https:"):e}},{key:"addToHostList",value:function(e){var t,n,r=this,o=(Array.isArray(e)?e:[e]).map(function(e){return r._sanitizeEndpointUrl(e)}),a=o.filter(function(e){return-1===r._urls.indexOf(e)});return(t=this._urls).push.apply(t,i(a)),(n=this._hosts).push.apply(n,i(a.map(function(e){return p.createRequest(e,r._agentOptions,r._agent)}))),o.map(function(e){return r._urls.indexOf(e)})}},{key:"getFabricName",value:function(){return this._fabricName}},{key:"getTenantName",value:function(){return this._tenantName}},{key:"getUrls",value:function(){return this._urls}},{key:"getActiveHost",value:function(){return this._activeHost}},{key:"setFabricName",value:function(e){if(!1===this._fabricName)throw new Error("Can not change fabric from absolute URL");this._fabricName=e}},{key:"setTenantName",value:function(e){if(!1===this._tenantName)throw new Error("Can not change tenant from absolute URL");this._tenantName=e}},{key:"setHeader",value:function(e,t){this._headers[e]=t}},{key:"close",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._hosts[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.close&&o.close()}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"extractTenantName",value:function(e){var t=e.split(".");return t.splice(-2,2),t.join(".")}},{key:"request",value:function(e,n){var i=this,o=e.host,a=e.method,u=void 0===a?"GET":a,l=e.body,h=e.expectBinary,d=void 0!==h&&h,v=e.isBinary,y=void 0!==v&&v,m=e.headers,_=r(e,["host","method","body","expectBinary","isBinary","headers"]);return new Promise(function(e,r){var a="text/plain";y?a="application/octet-stream":l&&("object"===(void 0===l?"undefined":s(l))?(l=JSON.stringify(l),a="application/json"):l=String(l));var h=c({},i._headers,{"content-type":a,"x-c8-version":String(i._c8Version)});i._queue.push({retries:0,host:o,options:{url:i._buildUrl(_),headers:c({},h,m),method:u,expectBinary:d,body:l},reject:r,resolve:function(o){if(p.isBrowser&&i._agent)o.json().then(function(t){t.hasOwnProperty("error")&&t.hasOwnProperty("code")&&t.hasOwnProperty("errorMessage")&&t.hasOwnProperty("errorNum")?r(new f.C8Error({body:t})):o.status&&o.status>=400?r(new f.HttpError({body:t})):e(n?n({body:t}):{body:t})}).catch(function(e){r(e)});else{var a=o.headers["content-type"],s=void 0;if(o.body.length&&a&&a.match(t.MIME_JSON))try{s=o.body,s=JSON.parse(s)}catch(e){if(!d)return"string"!=typeof s&&(s=o.body.toString("utf-8")),e.response=o,void r(e)}else s=o.body&&!d?o.body.toString("utf-8"):o.body;s&&s.hasOwnProperty("error")&&s.hasOwnProperty("code")&&s.hasOwnProperty("errorMessage")&&s.hasOwnProperty("errorNum")?(o.body=s,r(new f.C8Error(o))):o.statusCode&&o.statusCode>=400?(o.body=s,r(new f.HttpError(o))):(d||(o.body=s),e(n?n(o):o))}}}),i._runQueue()})}},{key:"_fabricPath",get:function(){return!1===this._fabricName?"":"/_tenant/"+this._tenantName+"/_fabric/"+this._fabricName}},{key:"c8Major",get:function(){return Math.floor(this._c8Version/1e4)}}]),e}();t.Connection=y},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){return Boolean(e&&e.query&&e.bindVars)}function i(e){return Boolean(e&&"function"==typeof e.toC8QL)}function o(e){for(var t={},n=[],r=e[0],o=arguments.length,s=Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];for(var c=0;c<s.length;c++){var l=s[c],h=l;if(i(l))r+=""+l.toC8QL()+e[c+1];else{var f=n.indexOf(l),p=-1!==f,d="value"+(p?f:n.length);a.isC8Collection(l)&&(d="@"+d,h=l.name),p||(n.push(l),t[d]=h),r+="@"+d+e[c+1]}}return{query:r,bindVars:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.isC8QLQuery=r,t.isC8QLLiteral=i,t.c8ql=o,function(e){e.literal=function(e){return{toC8QL:function(){return String(e)}}}}(o=t.c8ql||(t.c8ql={}))},function(e,t,n){"use strict";t.decode=t.parse=n(26),t.encode=t.stringify=n(27)},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return l.isC8Collection(e)?String(e.name):String(e)}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(5),l=n(1),h=n(3),f=n(10),p=n(0),d=n(11),v=n(12),y=n(2),m=n(48),_=n(49),g=n(50),b=n(51),w=n(13),k=function(){function e(t){i(this,e),this._connection=new h.Connection(t)}return u(e,[{key:"route",value:function(e,t){return new m.Route(this._connection,e,t)}},{key:"close",value:function(){this._connection.close()}},{key:"useFabric",value:function(e){return this._connection.setFabricName(e),this}},{key:"useBearerAuth",value:function(e){return this._connection.setHeader("authorization","Bearer "+e),this}},{key:"useBasicAuth",value:function(e,t){return this._connection.setHeader("authorization","Basic "+_.btoa(e+":"+t)),this}},{key:"get",value:function(){return this._connection.request({path:"/database/current"},function(e){return e.body.result})}},{key:"exists",value:function(){return this.get().then(function(){return!0},function(e){if(p.isC8Error(e)&&1228===e.errorNum)return!1;throw e})}},{key:"createFabric",value:function(e,t,n){return this._connection.request({method:"POST",path:"/database",body:{users:t||[],name:e,options:n}},function(e){return e.body})}},{key:"listFabrics",value:function(){return this._connection.request({path:"/database"},function(e){return e.body.result})}},{key:"listUserFabrics",value:function(){return this._connection.request({path:"/database/user"},function(e){return e.body.result})}},{key:"dropFabric",value:function(e){return this._connection.request({method:"DELETE",path:"/database/"+e},function(e){return e.body})}},{key:"login",value:function(e,t){var n=this;return this._connection.request({method:"POST",path:"/_open/auth",body:{email:e,password:t},absolutePath:!0},function(e){return n.useBearerAuth(e.body.jwt),n.useTenant(e.body.tenant),e.body})}},{key:"updateFabricSpotRegion",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this._connection.request({method:"PUT",path:"_tenant/"+e+"/_fabric/"+t+"/database/"+n,absolutePath:!0},function(e){return e.body})}},{key:"getEvents",value:function(){return this._connection.request({method:"GET",path:"/events"},function(e){return e.body})}},{key:"deleteEvents",value:function(e){return this._connection.request({method:"DELETE",path:"/events",body:JSON.stringify(e)},function(e){return e.body})}},{key:"event",value:function(e,t){return new g.Event(this._connection,e,t)}},{key:"collection",value:function(e){return new l.DocumentCollection(this._connection,e)}},{key:"edgeCollection",value:function(e){return new l.EdgeCollection(this._connection,e)}},{key:"listCollections",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._connection.request({path:"/collection",qs:{excludeSystem:t}},function(t){return e._connection.c8Major<=2?t.body.collections:t.body.result})}},{key:"collections",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,n=this,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listCollections(r);case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return l.constructCollection(n._connection,e)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"truncate",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,n=this,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listCollections(r);case 2:return t=e.sent,e.next=5,Promise.all(t.map(function(e){return n._connection.request({method:"PUT",path:"/collection/"+e.name+"/truncate"},function(e){return e.body})}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"graph",value:function(e){return new d.Graph(this._connection,e)}},{key:"listGraphs",value:function(){return this._connection.request({path:"/_api/graph"},function(e){return e.body.graphs})}},{key:"graphs",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listGraphs();case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return n.graph(e._key)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"transaction",value:function(e,t,n,r){return"number"==typeof n&&(r=n,n=void 0),"number"==typeof r&&(r={lockTimeout:r}),"string"==typeof e?e={write:[e]}:Array.isArray(e)?e={write:e.map(o)}:l.isC8Collection(e)?e={write:o(e)}:e&&"object"===(void 0===e?"undefined":s(e))&&(e=a({},e),e.read&&(Array.isArray(e.read)?e.read=e.read.map(o):e.read=o(e.read)),e.write&&(Array.isArray(e.write)?e.write=e.write.map(o):e.write=o(e.write))),this._connection.request({method:"POST",path:"/transaction",body:a({collections:e,action:t,params:n},r)},function(e){return e.body.result})}},{key:"query",value:function(e,t,n){var r=this;return c.isC8QLQuery(e)?(n=t,t=e.bindVars,e=e.query):c.isC8QLLiteral(e)&&(e=e.toC8QL()),this._connection.request({method:"POST",path:"/cursor",body:a({},n,{query:e,bindVars:t})},function(e){return new f.ArrayCursor(r._connection,e.body,e.host)})}},{key:"validateQuery",value:function(e){return this._connection.request({method:"POST",path:"/query",body:{query:e}},function(e){return e.body})}},{key:"explainQuery",value:function(e){return this._connection.request({method:"POST",path:"/_api/explain",body:a({},e)},function(e){return e.body})}},{key:"getCurrentQueries",value:function(){return this._connection.request({path:"/query/current"},function(e){return e.body})}},{key:"clearSlowQueries",value:function(){return this._connection.request({method:"DELETE",path:"/query/slow"},function(e){return e.body})}},{key:"getSlowQueries",value:function(){return this._connection.request({path:"/query/slow"},function(e){return e.body})}},{key:"terminateRunningQuery",value:function(e){return this._connection.request({method:"DELETE",path:"/query/"+e},function(e){return e.body})}},{key:"listFunctions",value:function(){return this._connection.request({path:"/c8qlfunction"},function(e){return e.body})}},{key:"createFunction",value:function(e,t,n){return this._connection.request({method:"POST",path:"/c8qlfunction",body:{name:e,code:t,isDeterministic:n}},function(e){return e.body})}},{key:"dropFunction",value:function(e,t){var n="boolean"==typeof t?"/c8qlfunction/"+e+"?group="+t:"/c8qlfunction/"+e;return this._connection.request({method:"DELETE",path:n},function(e){return e.body})}},{key:"version",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"GET",path:"/_fabric/"+this._connection.getFabricName()+"/_api/version",absolutePath:!0,qs:{details:e}},function(e){return e.body})}},{key:"useTenant",value:function(e){return this._connection.setTenantName(e),this}},{key:"tenant",value:function(e,t){return new v.Tenant(this._connection,e,t)}},{key:"listTenants",value:function(){return this._connection.request({method:"GET",path:"/tenants",absolutePath:!0},function(e){return e.body})}},{key:"stream",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new y.Stream(this._connection,e,t,n)}},{key:"getStreams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this._connection.request({method:"GET",path:"/streams",qs:void 0===e?"":"global="+e},function(e){return e.body})}},{key:"getAllStreams",value:function(){return this._connection.request({method:"GET",path:"/streams"},function(e){return e.body})}},{key:"listPersistentStreams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"GET",path:"/streams/persistent",qs:"local="+e},function(e){return e.body})}},{key:"clearBacklog",value:function(){return this._connection.request({method:"POST",path:"/streams/clearbacklog"},function(e){return e.body})}},{key:"clearSubscriptionBacklog",value:function(e){return this._connection.request({method:"POST",path:"/streams/clearbacklog/"+e},function(e){return e.body})}},{key:"unsubscribe",value:function(e){return this._connection.request({method:"POST",path:"/streams/unsubscribe/"+e},function(e){return e.body})}},{key:"getAllEdgeLocations",value:function(){return this._connection.request({method:"GET",path:"/datacenter/all",absolutePath:!0},function(e){return e.body})}},{key:"getTenantEdgeLocations",value:function(){return this._connection.request({method:"GET",path:"/datacenter/_tenant/"+this._connection.getTenantName(),absolutePath:!0},function(e){return e.body})}},{key:"getLocalEdgeLocation",value:function(){return this._connection.request({method:"GET",path:"/datacenter/local",absolutePath:!0},function(e){return e.body})}},{key:"changeEdgeLocationSpotStatus",value:function(e,t){return this._connection.request({method:"PUT",path:"_api/datacenter/"+e+"/"+t,absolutePath:!0},function(e){return e.body})}},{key:"user",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new b.default(this._connection,e,t)}},{key:"getAllUsers",value:function(){return this._connection.request({method:"GET",path:"/_admin/user"},function(e){return e.body})}},{key:"listSavedQueries",value:function(){return this._connection.request({method:"GET",path:"/restql/user"},function(e){return e.body})}},{key:"saveQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];try{if(e.includes(" "))throw"Spaces are not allowed in query name";return this._connection.request({method:"POST",path:"/restql",body:{query:{name:e,parameter:t,value:n}}},function(e){return e.body})}catch(e){return e}}},{key:"executeSavedQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._connection.request({method:"POST",path:"/restql/execute/"+e,body:{bindVars:t}},function(e){return e.body})}},{key:"updateSavedQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return this._connection.request({method:"PUT",path:"/restql/"+e,body:{query:{parameter:t,value:n}}},function(e){return e.body})}},{key:"deleteSavedQuery",value:function(e){return this._connection.request({method:"DELETE",path:"/restql/"+e},function(e){return e.body})}},{key:"createRestqlCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._connection.request({method:"POST",path:"/restql/dynamic",body:{bindVars:[t],cache:!0,count:!0,options:{profile:!0},query:e}},function(e){return e.body})}},{key:"streamApp",value:function(e){return new w.Streamapps(this._connection,e)}},{key:"createStreamApp",value:function(e,t){return this._connection.request({method:"POST",path:"/_api/streamapps",body:JSON.stringify({definition:t,regions:e})},function(e){return e.body})}},{key:"getAllStreamApps",value:function(){return this._connection.request({method:"GET",path:"/_api/streamapps"},function(e){return e.body})}},{key:"validateStreamappDefinition",value:function(e){return this._connection.request({method:"POST",path:"/_api/streamapps/validate",body:{definition:e}},function(e){return e.body})}},{key:"getSampleStreamApps",value:function(){return this._connection.request({method:"GET",path:"/_api/streamapps/samples"},function(e){return e.body})}},{key:"name",get:function(){return this._connection.getFabricName()||null}}]),e}();t.Fabric=k},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,r){o(this,e),this.extra=n.extra,this._connection=t,this._result=n.result,this._hasMore=Boolean(n.hasMore),this._id=n.id,this._host=r,this.count=n.count}return a(e,[{key:"_drain",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._more();case 2:if(this._hasMore){e.next=4;break}return e.abrupt("return",this);case 4:return e.abrupt("return",this._drain());case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"_more",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._hasMore){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this._connection.request({method:"PUT",path:"/cursor/"+this._id,host:this._host});case 6:n=e.sent,(t=this._result).push.apply(t,r(n.body.result)),this._hasMore=n.body.hasMore;case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"delete",value:function(){return this._connection.request({method:"DELETE",path:"/cursor/"+this._id},function(e){return e.body})}},{key:"all",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._drain();case 2:return t=this._result,this._result=[],e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"next",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._result.length||!this._hasMore){e.next=5;break}return e.next=3,this._more();case 3:e.next=0;break;case 5:if(this._result.length){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",this._result.shift());case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"hasNext",value:function(){return Boolean(this._hasMore||this._result.length)}},{key:"each",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!this._result.length&&!this._hasMore){e.next=15;break}r=void 0;case 3:if(!this._result.length){e.next=10;break}if(r=t(this._result.shift(),n,this),n++,!1!==r){e.next=8;break}return e.abrupt("return",r);case 8:e.next=3;break;case 10:if(!this._hasMore){e.next=13;break}return e.next=13,this._more();case 13:e.next=1;break;case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"every",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!this._result.length&&!this._hasMore){e.next=15;break}r=void 0;case 3:if(!this._result.length){e.next=10;break}if(r=t(this._result.shift(),n,this),n++,r){e.next=8;break}return e.abrupt("return",!1);case 8:e.next=3;break;case 10:if(!this._hasMore){e.next=13;break}return e.next=13,this._more();case 13:e.next=1;break;case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"some",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!this._result.length&&!this._hasMore){e.next=15;break}r=void 0;case 3:if(!this._result.length){e.next=10;break}if(r=t(this._result.shift(),n,this),n++,!r){e.next=8;break}return e.abrupt("return",!0);case 8:e.next=3;break;case 10:if(!this._hasMore){e.next=13;break}return e.next=13,this._more();case 13:e.next=1;break;case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"map",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=[];case 2:if(!this._result.length&&!this._hasMore){e.next=9;break}for(;this._result.length;)r.push(t(this._result.shift(),n,this)),n++;if(!this._hasMore){e.next=7;break}return e.next=7,this._more();case 7:e.next=2;break;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"reduce",value:function(){function e(e,n){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,void 0!==n){e.next=7;break}if(this._result.length||this._hasMore){e.next=5;break}return e.next=5,this._more();case 5:n=this._result.shift(),r+=1;case 7:if(!this._result.length&&!this._hasMore){e.next=14;break}for(;this._result.length;)n=t(n,this._result.shift(),r,this),r++;if(!this._hasMore){e.next=12;break}return e.next=12,this._more();case 12:e.next=7;break;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.ArrayCursor=s},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),h=n(0),f=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.type=l.CollectionType.DOCUMENT_COLLECTION,i.graph=r,i}return s(t,e),c(t,[{key:"document",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._connection.request({path:"/_api/graph/"+this.graph.name+"/vertex/"+this._documentHandle(e)},function(e){return e.body.vertex});return t?n.catch(function(e){if(h.isC8Error(e)&&e.errorNum===l.DOCUMENT_NOT_FOUND)return null;throw e}):n}},{key:"vertex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.document(e,t)}},{key:"save",value:function(e,t){return this._connection.request({method:"POST",path:"/_api/graph/"+this.graph.name+"/vertex/"+this.name,body:e,qs:t},function(e){return e.body.vertex})}},{key:"replace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev){var o=void 0,a=n;o=a.rev,n=i(a,["rev"]),r["if-match"]=o}return this._connection.request({method:"PUT",path:"/_api/graph/"+this.graph.name+"/vertex/"+this._documentHandle(e),body:t,qs:n,headers:r},function(e){return e.body.vertex})}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev){var o=void 0,a=n;o=a.rev,n=i(a,["rev"]),r["if-match"]=o}return this._connection.request({method:"PATCH",path:"/_api/graph/"+this.graph.name+"/vertex/"+this._documentHandle(e),body:t,qs:n,headers:r},function(e){return e.body.vertex})}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof t&&(t={rev:t}),t.rev){var r=void 0,o=t;r=o.rev,t=i(o,["rev"]),n["if-match"]=r}return this._connection.request({method:"DELETE",path:"/_api/graph/"+this.graph.name+"/vertex/"+this._documentHandle(e),qs:t,headers:n},function(e){return e.body.removed})}}]),t}(l.BaseCollection);t.GraphVertexCollection=f;var p=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.type=l.CollectionType.EDGE_COLLECTION,i.type=l.CollectionType.EDGE_COLLECTION,i.graph=r,i}return s(t,e),c(t,[{key:"document",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._connection.request({path:"/_api/graph/"+this.graph.name+"/edge/"+this._documentHandle(e)},function(e){return e.body.edge});return t?n.catch(function(e){if(h.isC8Error(e)&&e.errorNum===l.DOCUMENT_NOT_FOUND)return null;throw e}):n}},{key:"save",value:function(e,t,n,r){return void 0!==t&&(void 0!==n?(e._from=this._documentHandle(t),e._to=this._documentHandle(n)):r=t),this._connection.request({method:"POST",path:"/_api/graph/"+this.graph.name+"/edge/"+this.name,body:e,qs:r},function(e){return e.body.edge})}},{key:"replace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev){var o=void 0,a=n;o=a.rev,n=i(a,["rev"]),r["if-match"]=o}return this._connection.request({method:"PUT",path:"/_api/graph/"+this.graph.name+"/edge/"+this._documentHandle(e),body:t,qs:n,headers:r},function(e){return e.body.edge})}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev){var o=void 0,a=n;o=a.rev,n=i(a,["rev"]),r["if-match"]=o}return this._connection.request({method:"PATCH",path:"/_api/graph/"+this.graph.name+"/edge/"+this._documentHandle(e),body:t,qs:n,headers:r},function(e){return e.body.edge})}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof t&&(t={rev:t}),t.rev){var r=void 0,o=t;r=o.rev,t=i(o,["rev"]),n["if-match"]=r}return this._connection.request({method:"DELETE",path:"/_api/graph/"+this.graph.name+"/edge/"+this._documentHandle(e),qs:t,headers:n},function(e){return e.body.removed})}}]),t}(l.EdgeCollection);t.GraphEdgeCollection=p;var d=function(){function e(t,n){o(this,e),this.name=n,this._connection=t}return c(e,[{key:"get",value:function(){return this._connection.request({path:"/_api/graph/"+this.name},function(e){return e.body.graph})}},{key:"exists",value:function(){return this.get().then(function(){return!0},function(e){if(h.isC8Error(e)&&1924===e.errorNum)return!1;throw e})}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._connection.request({method:"POST",path:"/_api/graph",body:u({},e,{name:this.name})},function(e){return e.body.graph})}},{key:"drop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"DELETE",path:"/_api/graph/"+this.name,qs:{dropCollections:e}},function(e){return e.body.removed})}},{key:"vertexCollection",value:function(e){return new f(this._connection,e,this)}},{key:"listVertexCollections",value:function(){return this._connection.request({path:"/_api/graph/"+this.name+"/vertex"},function(e){return e.body.collections})}},{key:"vertexCollections",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listVertexCollections();case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return new f(n._connection,e,n)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"addVertexCollection",value:function(e){return l.isC8Collection(e)&&(e=e.name),this._connection.request({method:"POST",path:"/_api/graph/"+this.name+"/vertex",body:{collection:e}},function(e){return e.body.graph})}},{key:"removeVertexCollection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.isC8Collection(e)&&(e=e.name),this._connection.request({method:"DELETE",path:"/_api/graph/"+this.name+"/vertex/"+e,qs:{dropCollection:t}},function(e){return e.body.graph})}},{key:"edgeCollection",value:function(e){return new p(this._connection,e,this)}},{key:"listEdgeCollections",value:function(){return this._connection.request({path:"/_api/graph/"+this.name+"/edge"},function(e){return e.body.collections})}},{key:"edgeCollections",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listEdgeCollections();case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return new p(n._connection,e,n)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"addEdgeDefinition",value:function(e){return this._connection.request({method:"POST",path:"/_api/graph/"+this.name+"/edge",body:e},function(e){return e.body.graph})}},{key:"replaceEdgeDefinition",value:function(e,t){return this._connection.request({method:"PUT",path:"/_api/graph/"+this.name+"/edge/"+e,body:t},function(e){return e.body.graph})}},{key:"removeEdgeDefinition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._connection.request({method:"DELETE",path:"/_api/graph/"+this.name+"/edge/"+e,qs:{dropCollection:t}},function(e){return e.body.graph})}}]),e}();t.Graph=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n,i){r(this,e),this._connection=t,this.name=i,this.email=n}return i(e,[{key:"createTenant",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._connection.request({method:"POST",path:"/tenant",absolutePath:!0,body:{dcList:Array.isArray(t)?t.join(","):t,email:this.email,passwd:e,extra:r}},function(e){return n.name=e.body.tenant,e.body})}},{key:"dropTenant",value:function(){return this._connection.request({method:"DELETE",path:"/tenant/"+this.name,absolutePath:!0},function(e){return e.body})}},{key:"getTenantEdgeLocations",value:function(){return this._connection.request({method:"GET",path:"/datacenter/_tenant/"+this.name,absolutePath:!0},function(e){return e.body})}},{key:"tenantDetails",value:function(){return this._connection.request({method:"GET",path:"/tenant/"+this.name,absolutePath:!0},function(e){return e.body})}},{key:"modifyTenant",value:function(e,t){return this._connection.request({method:"PATCH",path:"/tenant/"+this.name,absolutePath:!0,body:{extra:t,passwd:e}},function(e){return e.body})}}]),e}();t.Tenant=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n){r(this,e),this._connection=t,this.name=n}return i(e,[{key:"retriveApplication",value:function(){return this._connection.request({method:"GET",path:"/_api/streamapps/"+this.name},function(e){return e.body})}},{key:"updateApplication",value:function(e,t){return this._connection.request({method:"PUT",path:"/_api/streamapps/"+this.name,body:JSON.stringify({definition:t,regions:e})},function(e){return e.body})}},{key:"deleteApplication",value:function(){return this._connection.request({method:"DELETE",path:"/_api/streamapps/"+this.name},function(e){return e.body})}},{key:"activateStreamApplication",value:function(e){return this._connection.request({method:"PATCH",path:"/_api/streamapps/"+this.name+"/active?active="+e},function(e){return e.body})}},{key:"query",value:function(e){return this._connection.request({method:"POST",path:"/_api/streamapps/query/"+this.name,body:{query:e}},function(e){return e.body})}}]),e}();t.Streamapps=o},function(e,t,n){n(15),e.exports=n(16)},function(e,t,n){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){function r(e,t,n,r){var i=t&&t.prototype instanceof o?t:o,a=Object.create(i.prototype),s=new d(r||[]);return a._invoke=l(e,n,s),a}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function a(){}function s(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){function n(r,o,a,s){var u=i(e[r],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===(void 0===l?"undefined":t(l))&&g.call(l,"__await")?Promise.resolve(l.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):Promise.resolve(l).then(function(e){c.value=e,a(c)},s)}s(u.arg)}function r(e,t){function r(){return new Promise(function(r,i){n(e,t,r,i)})}return o=o?o.then(r,r):r()}var o;this._invoke=r}function l(e,t,n){var r=T;return function(o,a){if(r===P)throw new Error("Generator is already running");if(r===O){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=h(s,n);if(u){if(u===j)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===T)throw r=O,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=P;var c=i(e,t,n);if("normal"===c.type){if(r=n.done?O:S,c.arg===j)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=O,n.method="throw",n.arg=c.arg)}}}function h(e,t){var n=e.iterator[t.method];if(n===m){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=m,h(e,t),"throw"===t.method))return j;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}var r=i(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,j;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=m),t.delegate=null,j):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,j)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function v(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=m,t.done=!0,t};return r.next=r}}return{next:y}}function y(){return{value:m,done:!0}}var m,_=Object.prototype,g=_.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",k=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag",x="object"===t(e),C=n.regeneratorRuntime;if(C)return void(x&&(e.exports=C));C=n.regeneratorRuntime=x?e.exports:{},C.wrap=r;var T="suspendedStart",S="suspendedYield",P="executing",O="completed",j={},R={};R[w]=function(){return this};var A=Object.getPrototypeOf,L=A&&A(A(v([])));L&&L!==_&&g.call(L,w)&&(R=L);var q=s.prototype=o.prototype=Object.create(R);a.prototype=q.constructor=s,s.constructor=a,s[E]=a.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,E in e||(e[E]="GeneratorFunction")),e.prototype=Object.create(q),e},C.awrap=function(e){return{__await:e}},u(c.prototype),c.prototype[k]=function(){return this},C.AsyncIterator=c,C.async=function(e,t,n,i){var o=new c(r(e,t,n,i));return C.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},u(q),q[E]="Generator",q[w]=function(){return this},q.toString=function(){return"[object Generator]"},C.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},C.values=v,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=m),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,j):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),j},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),j}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=m),j}}}(function(){return this}()||Function("return this")())}).call(t,n(4)(e))},function(e,t,n){"use strict";e.exports=n(17).default,e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})},function(e,t,n){"use strict";function r(e){return new l.C8Client(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);t.c8ql=i.c8ql;var o=n(1);t.BaseCollection=o.BaseCollection;var a=n(3);t.Config=a.Config;var s=n(9);t.Fabric=s.Fabric;var u=n(0),c=n(10);t.ArrayCursor=c.ArrayCursor;var l=n(52);t.C8Client=l.C8Client,t.default=r,Object.assign(r,{CollectionType:o.CollectionType,C8Error:u.C8Error,Fabric:s.Fabric,c8ql:i.c8ql,C8Client:l.C8Client});var h=n(1);t.DocumentCollection=h.DocumentCollection,t.EdgeCollection=h.EdgeCollection;var f=n(11);t.Graph=f.Graph;var p=n(12);t.Tenant=p.Tenant;var d=n(2);t.Stream=d.Stream;var v=n(13);t.Streamapps=v.Streamapps},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);r=r.default||r,t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:n.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(n,n.constructor),i(n)):(Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,value:new Error(e).stack,writable:!0}),n)}return o(t,e),t}(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));t.default=s},function(e,t,n){"use strict";function r(e,t){var n="/streams/"+e;return t?""+n+t:n}function i(e){return e.reduce(function(e,t,n){return n>0?e+","+t.name:t.name},"")}Object.defineProperty(t,"__esModule",{value:!0}),t.getFullStreamPath=r,t.getDCListString=i},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){switch(e.arrayFormat){case"index":return function(t){return function(n,i){var o=n.length;return void 0===i||e.skipNull&&null===i?n:null===i?[].concat(r(n),[[s(t,e),"[",o,"]"].join("")]):[].concat(r(n),[[s(t,e),"[",s(o,e),"]=",s(i,e)].join("")])}};case"bracket":return function(t){return function(n,i){return void 0===i||e.skipNull&&null===i?n:null===i?[].concat(r(n),[[s(t,e),"[]"].join("")]):[].concat(r(n),[[s(t,e),"[]=",s(i,e)].join("")])}};case"comma":case"separator":return function(t){return function(n,r){return null===r||void 0===r||0===r.length?n:0===n.length?[[s(t,e),"=",s(r,e)].join("")]:[[n,s(r,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(n,i){return void 0===i||e.skipNull&&null===i?n:null===i?[].concat(r(n),[s(t,e)]):[].concat(r(n),[[s(t,e),"=",s(i,e)].join("")])}}}}function o(e){var t=void 0;switch(e.arrayFormat){case"index":return function(e,n,r){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(r[e]=n);void 0===r[e]&&(r[e]={}),r[e][t[1]]=n};case"bracket":return function(e,n,r){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===r[e]?void(r[e]=[n]):void(r[e]=[].concat(r[e],n)):void(r[e]=n)};case"comma":case"separator":return function(t,n,r){var i="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1,o=i?n.split(e.arrayFormatSeparator).map(function(t){return u(t,e)}):null===n?n:u(n,e);r[t]=o};default:return function(e,t,n){if(void 0===n[e])return void(n[e]=t);n[e]=[].concat(n[e],t)}}}function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,t){return t.encode?t.strict?m(e):encodeURIComponent(e):e}function u(e,t){return t.decode?_(e):e}function c(e){return Array.isArray(e)?e.sort():"object"===(void 0===e?"undefined":y(e))?c(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}function l(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}function f(e){e=l(e);var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),a(t.arrayFormatSeparator);var n=o(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;var i=!0,s=!1,l=void 0;try{for(var h,f=e.split("&")[Symbol.iterator]();!(i=(h=f.next()).done);i=!0){var d=h.value,m=g(t.decode?d.replace(/\+/g," "):d,"="),_=v(m,2),b=_[0],w=_[1];w=void 0===w?null:"comma"===t.arrayFormat?w:u(w,t),n(u(b,t),w,r)}}catch(e){s=!0,l=e}finally{try{!i&&f.return&&f.return()}finally{if(s)throw l}}var k=!0,E=!1,x=void 0;try{for(var C,T=Object.keys(r)[Symbol.iterator]();!(k=(C=T.next()).done);k=!0){var b=C.value,w=r[b];if("object"===(void 0===w?"undefined":y(w))&&null!==w){var S=!0,P=!1,O=void 0;try{for(var j,R=Object.keys(w)[Symbol.iterator]();!(S=(j=R.next()).done);S=!0){var A=j.value;w[A]=p(w[A],t)}}catch(e){P=!0,O=e}finally{try{!S&&R.return&&R.return()}finally{if(P)throw O}}}else r[b]=p(w,t)}}catch(e){E=!0,x=e}finally{try{!k&&T.return&&T.return()}finally{if(E)throw x}}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"===(void 0===n?"undefined":y(n))&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e},Object.create(null))}var v=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=n(22),_=n(23),g=n(24);t.extract=f,t.parse=d,t.stringify=function(e,t){if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),a(t.arrayFormatSeparator);var n=i(t),r=Object.assign({},e);if(t.skipNull){var o=!0,u=!1,c=void 0;try{for(var l,h=Object.keys(r)[Symbol.iterator]();!(o=(l=h.next()).done);o=!0){var f=l.value;void 0!==r[f]&&null!==r[f]||delete r[f]}}catch(e){u=!0,c=e}finally{try{!o&&h.return&&h.return()}finally{if(u)throw c}}}var p=Object.keys(r);return!1!==t.sort&&p.sort(t.sort),p.map(function(r){var i=e[r];return void 0===i?"":null===i?s(r,t):Array.isArray(i)?i.reduce(n(r),[]).join("&"):s(r,t)+"="+s(i,t)}).filter(function(e){return e.length>0}).join("&")},t.parseUrl=function(e,t){return{url:l(e).split("?")[0]||"",query:d(f(e),t)}},t.stringifyUrl=function(e,n){var r=l(e.url).split("?")[0]||"",i=t.extract(e.url),o=t.parse(i),a=h(e.url),s=Object.assign(o,e.query),u=t.stringify(s,n);return u&&(u="?"+u),""+r+u+a}},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],r(n),r(i))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(s),n=1;n<t.length;n++)e=r(t,n).join(""),t=e.match(s);return e}}function o(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=u.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=u.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),a=0;a<o.length;a++){var s=o[a];e=e.replace(new RegExp(s,"g"),t[s])}return e}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=new RegExp("%[a-f0-9]{2}","gi"),u=new RegExp("(%[a-f0-9]{2})+","gi");e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+(void 0===e?"undefined":a(e))+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return o(e)}}},function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";function r(e){var t=new WebSocket(e);return{on:function(e,n){var r=function(e){return n(e)};switch(e){case"open":t.onopen=r;break;case"close":t.onclose=r;break;case"error":t.onerror=r;break;case"message":t.onmessage=function(e){return n(e.data)}}},send:function(e){t.send(e)},terminate:function(e,n){t.close(e,n)},getConnection:function(){return t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.ws=r},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,f,p,d,v=e[l].replace(s,"%20"),y=v.indexOf(n);y>=0?(h=v.substr(0,y),f=v.substr(y+1)):(h=v,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){switch(void 0===e?"undefined":i(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,u){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":i(e))?r(s(e),function(i){var s=encodeURIComponent(o(i))+n;return a(e[i])?r(e[i],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[i]))}).join(t):u?encodeURIComponent(o(u))+n+encodeURIComponent(o(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";function r(e,t){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=Object.keys(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;t.includes(u)||(n[u]=e[u])}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}function i(e,t,n){var i=a.parse(e),l=r(t,["keepAlive","keepAliveMsecs","maxSockets"]);return function(e,t){var r=e.method,h=e.url,f=e.headers,p=e.body,d=e.expectBinary,v=o({},i,{pathname:h.pathname?i.pathname?s.joinPath(i.pathname,h.pathname):h.pathname:i.pathname,search:h.search?i.search?i.search+"&"+h.search.slice(1):h.search:i.search}),y=function(e,n){y=function(){},t(e,n)};if(n)var m=n(a.format(v),o({},l,{body:p,method:r,headers:f})).then(function(e){if(e.headers.get("content-type").match(c.MIME_JSON))return e;throw e}).then(function(e){y(null,e)}).catch(function(e){var t={};t.request=m,e.status&&(t.status=e.status),e.statusText&&(t.statusText=e.statusText),y(t)});else var _=u.default(o({responseType:d?"blob":"text"},l,{url:a.format(v),useXDR:!0,body:p,method:r,headers:f}),function(e,t){if(e){var n=e;n.request=_,y(n)}else t.body||(t.body=""),y(null,t)})}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(29),s=n(32),u=n(35),c=n(3);t.isBrowser=!0,t.createRequest=i},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&l.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return l.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(30),l=n(31);t.parse=i,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=r;var h=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],v=["{","}","|","\\","^","`"].concat(d),y=["'"].concat(v),m=["%","/","?",";","#"].concat(y),_=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=n(6);r.prototype.parse=function(e,t,n){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":u(e)));var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var f=p.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?x.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=h.exec(s);if(d){d=d[0];var v=d.toLowerCase();this.protocol=v,s=s.substr(d.length)}if(n||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===s.substr(0,2);!C||d&&k[d]||(s=s.substr(2),this.slashes=!0)}if(!k[d]&&(C||d&&!E[d])){for(var T=-1,S=0;S<_.length;S++){var P=s.indexOf(_[S]);-1!==P&&(-1===T||P<T)&&(T=P)}var O,j;j=-1===T?s.lastIndexOf("@"):s.lastIndexOf("@",T),-1!==j&&(O=s.slice(0,j),s=s.slice(j+1),this.auth=decodeURIComponent(O)),T=-1;for(var S=0;S<m.length;S++){var P=s.indexOf(m[S]);-1!==P&&(-1===T||P<T)&&(T=P)}-1===T&&(T=s.length),this.host=s.slice(0,T),s=s.slice(T),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var A=this.hostname.split(/\./),S=0,L=A.length;S<L;S++){var q=A[S];if(q&&!q.match(g)){for(var F="",N=0,D=q.length;N<D;N++)q.charCodeAt(N)>127?F+="x":F+=q[N];if(!F.match(g)){var M=A.slice(0,S),U=A.slice(S+1),I=q.match(b);I&&(M.push(I[1]),U.unshift(I[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=c.toASCII(this.hostname));var B=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+B,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[v])for(var S=0,L=y.length;S<L;S++){var V=y[S];if(-1!==s.indexOf(V)){var G=encodeURIComponent(V);G===V&&(G=escape(V)),s=s.split(V).join(G)}}var K=s.indexOf("#");-1!==K&&(this.hash=s.substr(K),s=s.slice(0,K));var z=s.indexOf("?");if(-1!==z?(this.search=s.substr(z),this.query=s.substr(z+1),t&&(this.query=x.parse(this.query)),s=s.slice(0,z)):t&&(this.search="",this.query={}),s&&(this.pathname=s),E[v]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",Q=this.search||"";this.path=B+Q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=x.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||E[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(l.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=e[c])}return E[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!E[e.protocol]){for(var h=Object.keys(e),f=0;f<h.length;f++){var p=h[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||k[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=_||m||n.host&&e.pathname,b=g,w=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],x=n.protocol&&!E[n.protocol];if(x&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),g=g&&(""===d[0]||""===w[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),n.search=e.search,n.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(x){n.hostname=n.host=w.shift();var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return n.search=e.search,n.query=e.query,l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=w.slice(-1)[0],S=(n.host||e.host||w.length>1)&&("."===T||".."===T)||""===T,P=0,O=w.length;O>=0;O--)T=w[O],"."===T?w.splice(O,1):".."===T?(w.splice(O,1),P++):P&&(w.splice(O,1),P--);if(!g&&!b)for(;P--;P)w.unshift("..");!g||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var j=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(x){n.hostname=n.host=j?"":w.length?w.shift():"";var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return g=g||n.host&&w.length,g&&!j&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";(function(e,r){var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){function s(e){throw new RangeError(N[e])}function u(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function c(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(F,"."),r+u(e.split("."),t).join(".")}function l(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function h(e){return u(e,function(e){var t="";return e>65535&&(e-=65536,t+=U(e>>>10&1023|55296),e=56320|1023&e),t+=U(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:C}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?M(e/O):e>>1,e+=M(e/t);e>D*S>>1;r+=C)e=M(e/D);return M(r+(D+1)*e/(e+P))}function v(e){var t,n,r,i,o,a,u,c,l,p,v=[],y=e.length,m=0,_=R,g=j;for(n=e.lastIndexOf(A),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&s("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=m,a=1,u=C;i>=y&&s("invalid-input"),c=f(e.charCodeAt(i++)),(c>=C||c>M((x-m)/a))&&s("overflow"),m+=c*a,l=u<=g?T:u>=g+S?S:u-g,!(c<l);u+=C)p=C-l,a>M(x/p)&&s("overflow"),a*=p;t=v.length+1,g=d(m-o,t,0==o),M(m/t)>x-_&&s("overflow"),_+=M(m/t),m%=t,v.splice(m++,0,_)}return h(v)}function y(e){var t,n,r,i,o,a,u,c,h,f,v,y,m,_,g,b=[];for(e=l(e),y=e.length,t=R,n=0,o=j,a=0;a<y;++a)(v=e[a])<128&&b.push(U(v));for(r=i=b.length,i&&b.push(A);r<y;){for(u=x,a=0;a<y;++a)(v=e[a])>=t&&v<u&&(u=v);for(m=r+1,u-t>M((x-n)/m)&&s("overflow"),n+=(u-t)*m,t=u,a=0;a<y;++a)if(v=e[a],v<t&&++n>x&&s("overflow"),v==t){for(c=n,h=C;f=h<=o?T:h>=o+S?S:h-o,!(c<f);h+=C)g=c-f,_=C-f,b.push(U(p(f+g%_,0))),c=M(g/_);b.push(U(p(c,0))),o=d(n,m,r==i),n=0,++r}++n,++t}return b.join("")}function m(e){return c(e,function(e){return L.test(e)?v(e.slice(4).toLowerCase()):e})}function _(e){return c(e,function(e){return q.test(e)?"xn--"+y(e):e})}var g="object"==o(t)&&t&&!t.nodeType&&t,b="object"==o(e)&&e&&!e.nodeType&&e,w="object"==(void 0===r?"undefined":o(r))&&r;w.global!==w&&w.window!==w&&w.self!==w||(a=w);var k,E,x=2147483647,C=36,T=1,S=26,P=38,O=700,j=72,R=128,A="-",L=/^xn--/,q=/[^\x20-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=C-T,M=Math.floor,U=String.fromCharCode;if(k={version:"1.4.1",ucs2:{decode:l,encode:h},decode:v,encode:y,toASCII:_,toUnicode:m},"object"==o(n(8))&&n(8))void 0!==(i=function(){return k}.call(t,n,t,e))&&(e.exports=i);else if(g&&b)if(e.exports==g)b.exports=k;else for(E in k)k.hasOwnProperty(E)&&(g[E]=k[E]);else a.punycode=k}(void 0)}).call(t,n(4)(e),n(7))},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":r(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33);t.joinPath=r.join},function(e,t,n){"use strict";(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===a(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var c=[],u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(34))},function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){y&&d&&(y=!1,d.length?v=d.concat(v):m=-1,v.length&&u())}function u(){if(!y){var e=o(s);y=!0;for(var t=v.length;t;){for(d=v,v=[];++m<t;)d&&d[m].run();m=-1,t=v.length}d=null,y=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var h,f,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(e){h=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var d,v=[],y=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new c(e,t)),1!==v.length||y||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=n(36)},function(e,t,n){"use strict";function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var r=e;return l(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=f(t,{uri:e}),r.callback=n,r}function o(e,t,n){return t=i(e,t,n),a(t)}function a(e){function t(){4===l.readyState&&setTimeout(a,0)}function n(){var e=void 0;if(e=l.response?l.response:l.responseText||s(l),b)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,c(e,w)}function a(){if(!p){var t;clearTimeout(d),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=w,i=null;return 0!==t?(r={body:n(),statusCode:t,method:y,headers:{},url:v,rawRequest:l},l.getAllResponseHeaders&&(r.headers=h(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),c(i,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var u=!1,c=function(t,n,r){u||(u=!0,e.callback(t,n,r))},l=e.xhr||null;l||(l=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var f,p,d,v=l.url=e.uri||e.url,y=l.method=e.method||"GET",m=e.body||e.data,_=l.headers=e.headers||{},g=!!e.sync,b=!1,w={body:void 0,headers:{},statusCode:0,method:y,url:v,rawRequest:l};if("json"in e&&!1!==e.json&&(b=!0,_.accept||_.Accept||(_.Accept="application/json"),"GET"!==y&&"HEAD"!==y&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),m=JSON.stringify(!0===e.json?m:e.json))),l.onreadystatechange=t,l.onload=a,l.onerror=i,l.onprogress=function(){},l.onabort=function(){p=!0},l.ontimeout=i,l.open(y,v,!g,e.username,e.password),g||(l.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(d=setTimeout(function(){if(!p){p=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}},e.timeout)),l.setRequestHeader)for(f in _)_.hasOwnProperty(f)&&l.setRequestHeader(f,_[f]);else if(e.headers&&!r(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(m||null),l}function s(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}function u(){}var c=n(37),l=n(38),h=n(39),f=n(43);e.exports=o,e.exports.default=o,o.XMLHttpRequest=c.XMLHttpRequest||u,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:c.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,n,r){return n=i(t,n,r),n.method=e.toUpperCase(),a(n)}})},function(e,t,n){"use strict";(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(t,n(7))},function(e,t,n){"use strict";function r(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=r;var i=Object.prototype.toString},function(e,t,n){"use strict";var r=n(40),i=n(41),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return i(r(e).split("\n"),function(e){var n=e.indexOf(":"),i=r(e.slice(0,n)).toLowerCase(),a=r(e.slice(n+1));void 0===t[i]?t[i]=a:o(t[i])?t[i].push(a):t[i]=[t[i],a]}),t}},function(e,t,n){"use strict";function r(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=r,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){"use strict";var r=n(42),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a=function(e,t,n){for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},s=function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},u=function(e,t,n){for(var r in e)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},c=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=n),"[object Array]"===i.call(e)?a(e,t,o):"string"==typeof e?s(e,t,o):u(e,t,o)};e.exports=c},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Function.prototype.toString,o=/^\s*class\b/,a=function(e){try{var t=i.call(e);return o.test(t)}catch(e){return!1}},s=function(e){try{return!a(e)&&(i.call(e),!0)}catch(e){return!1}},u=Object.prototype.toString,c="function"==typeof Symbol&&"symbol"===r(Symbol.toStringTag);e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!==(void 0===e?"undefined":r(e)))return!1;if("function"==typeof e&&!e.prototype)return!0;if(c)return s(e);if(a(e))return!1;var t=u.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t,n){"use strict";function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}e.exports=r;var i=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";function r(e){this.message=e}var i=n(45);r.prototype=new Error,r.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new r("Invalid token specified");t=t||{};var n=!0===t.header?0:1;try{return JSON.parse(i(e.split(".")[n]))}catch(e){throw new r("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=r},function(e,t,n){"use strict";function r(e){return decodeURIComponent(i(e).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}var i=n(46);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return r(t)}catch(e){return i(t)}}},function(e,t,n){"use strict";function r(e){this.message=e}function i(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,a=0,s=0,u="";i=t.charAt(s++);~i&&(n=a%4?64*n+i:i,a++%4)?u+=String.fromCharCode(255&n>>(-2*a&6)):0)i=o.indexOf(i);return u}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||i},function(e,t,n){"use strict";function r(e,t,n){this.next=n,n&&(n.prev=this),this.prev=t,t&&(t.next=this),this.data=e}e.exports=function(){Object.defineProperty(this,"_head",{value:void 0,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(this,"_tail",{value:void 0,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(this,"_next",{value:void 0,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(this,"_length",{value:0,writable:!0,enumerable:!1,configurable:!1})},e.exports.prototype.__defineGetter__("head",function(){return this._head&&this._head.data}),e.exports.prototype.__defineGetter__("tail",function(){return this._tail&&this._tail.data}),e.exports.prototype.__defineGetter__("current",function(){return this._current&&this._current.data}),e.exports.prototype.__defineGetter__("length",function(){return this._length}),e.exports.prototype.push=function(e){this._tail=new r(e,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++},e.exports.prototype.pop=function(){var e=this._tail;if(0!==this._length)return 0===--this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)},e.exports.prototype.shift=function(){var e=this._head;if(0!==this._length)return 0===--this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)},e.exports.prototype.unshift=function(e){this._head=new r(e,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++},e.exports.prototype.unshiftCurrent=function(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)},e.exports.prototype.removeCurrent=function(e){var t=this._current;if(0!==this._length)return 0===--this._length?(this._head=this._tail=this._current=this._next=void 0,t.data):(t===this._tail?(this._tail=t.prev,this._tail.next=void 0,this._current=this._tail):t===this._head?(this._head=t.next,this._head.prev=void 0,this._current=this._head):(t.next.prev=t.prev,t.prev.next=t.next,this._current=t.prev),this._next=this._current.next,t.data)},e.exports.prototype.next=function(){var e=this._next;if(void 0!==e)return this._next=e.next,this._current=e,e.data},e.exports.prototype.resetCursor=function(){return this._current=this._next=this._head,this}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),n?"/"!==n.charAt(0)&&(n="/"+n):n="",this._connection=t,this._path=n,this._headers=r}return s(e,[{key:"route",value:function(t,n){return t?"/"!==t.charAt(0)&&(t="/"+t):t="",new e(this._connection,this._path+t,a({},this._headers,n))}},{key:"request",value:function(e){var t=e.method,n=e.path,i=e.headers,o=void 0===i?{}:i,s=r(e,["method","path","headers"]);return n?this._path&&"/"!==n.charAt(0)?s.path="/"+n:s.path=n:s.path="",s.basePath=this._path,s.headers=a({},this._headers,o),s.method=t?t.toUpperCase():"GET",this._connection.request(s)}},{key:"_request1",value:function(e){for(var t="",n=void 0,r=void 0,i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return void 0!==a[0]&&"string"!=typeof a[0]||(t=a.shift()),void 0!==a[0]&&"object"!==o(a[0])||(n=a.shift()),void 0!==a[0]&&"object"!==o(a[0])||(r=a.shift()),this.request({method:e,path:t,qs:n,headers:r})}},{key:"_request2",value:function(e){for(var t="",n=void 0,r=void 0,i=void 0,a=arguments.length,s=Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return void 0!==s[0]&&"string"!=typeof s[0]||(t=s.shift()),n=s.shift(),void 0!==s[0]&&"object"!==o(s[0])||(r=s.shift()),void 0!==s[0]&&"object"!==o(s[0])||(i=s.shift()),this.request({method:e,path:t,body:n,qs:r,headers:i})}},{key:"delete",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._request1.apply(this,["DELETE"].concat(t))}},{key:"get",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._request1.apply(this,["GET"].concat(t))}},{key:"head",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._request1.apply(this,["HEAD"].concat(t))}},{key:"patch",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._request2.apply(this,["PATCH"].concat(t))}},{key:"post",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._request2.apply(this,["POST"].concat(t))}},{key:"put",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._request2.apply(this,["PUT"].concat(t))}}]),e}();t.Route=u},function(e,t,n){"use strict";function r(e){return window.btoa(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.btoa=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.OK="OK",e.WARN="WARN",e.ERROR="ERROR"}(t.Status||(t.Status={}));!function(e){e.COLLECTION="COLLECTION",e.GRAPH="GRAPH",e.AUTH="AUTH",e.STREAM="STREAM",e.GEOFABRIC="GEOFABRIC"}(t.EntityType||(t.EntityType={}));!function(e){e.CREATE="CREATE",e.UPDATE="UPDATE",e.DELETE="DELETE",e.EXECUTE="EXECUTE",e.LOGIN="LOGIN"}(t.ActionType||(t.ActionType={}));var o=function(){function e(t,n,i){r(this,e),this._connection=t,this.entityName=n,this.eventId=i}return i(e,[{key:"create",value:function(e){var t=this,n=e.status,r=e.description,i=e.entityType,o=e.details,a=e.action,s=e.attributes;return this._connection.request({method:"POST",path:"/events",body:{status:n,description:r,entityName:this.entityName,entityType:i,details:o,action:a,attributes:s}},function(e){return t.eventId=e.body._key,e.body})}},{key:"details",value:function(){if(!this.eventId)throw new Error("Event ID is not set. Either provide while creating the handler or create a new event.");return this._connection.request({method:"GET",path:"/events/"+this.eventId},function(e){return e.body})}}]),e}();t.Event=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.USER_NOT_FOUND=1703;var s=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";r(this,e),this.user="",this.urlPrefix="/_admin/user",this.user=n,this._connection=t,this.email=i}return o(e,[{key:"createUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._connection.request({method:"POST",path:this.urlPrefix,body:{user:this.user,email:this.email,passwd:e,active:t,extra:n}},function(e){return e.body})}},{key:"getUserDeatils",value:function(){return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user},function(e){return e.body})}},{key:"hasUser",value:function(){return this.getUserDeatils().then(function(){return!0},function(e){if(a.isC8Error(e)&&e.errorNum===t.USER_NOT_FOUND)return!1;throw e})}},{key:"deleteUser",value:function(){return this._connection.request({method:"DELETE",path:this.urlPrefix+"/"+this.user},function(e){return e.body})}},{key:"_makeModification",value:function(e,t){return this._connection.request({method:t,path:this.urlPrefix+"/"+this.user,body:i({},e)},function(e){return e.body})}},{key:"modifyUser",value:function(e){return this._makeModification(e,"PATCH")}},{key:"replaceUser",value:function(e){return this._makeModification(e,"PUT")}},{key:"getAllDatabases",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/database",qs:{full:e}},function(e){return e.body})}},{key:"getDatabaseAccessLevel",value:function(e){return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/database/"+e},function(e){return e.body})}},{key:"clearDatabaseAccessLevel",value:function(e){return this._connection.request({method:"DELETE",path:this.urlPrefix+"/"+this.user+"/database/"+e},function(e){return e.body})}},{key:"setDatabaseAccessLevel",value:function(e,t){return this._connection.request({method:"PUT",path:this.urlPrefix+"/"+this.user+"/database/"+e,body:{grant:t}},function(e){return e.body})}},{key:"getCollectionAccessLevel",value:function(e,t){return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/database/"+e+"/collection/"+t},function(e){return e.body})}},{key:"clearCollectionAccessLevel",value:function(e,t){return this._connection.request({method:"DELETE",path:this.urlPrefix+"/"+this.user+"/database/"+e+"/collection/"+t},function(e){return e.body})}},{key:"setCollectionAccessLevel",value:function(e,t,n){return this._connection.request({method:"PUT",path:this.urlPrefix+"/"+this.user+"/database/"+e+"/collection/"+t,body:{grant:n}},function(e){return e.body})}},{key:"listAvailableUsers",value:function(){return this._connection.request({method:"GET",path:""+this.urlPrefix},function(e){return e.body})}},{key:"getStreamAccessLevel",value:function(e,t){return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/database/"+e+"/stream/"+t},function(e){return e.body})}},{key:"clearStreamAccessLevel",value:function(e,t){return this._connection.request({method:"DELETE",path:this.urlPrefix+"/"+this.user+"/database/"+e+"/stream/"+t},function(e){return e.body})}},{key:"setStreamAccessLevel",value:function(e,t,n){return this._connection.request({method:"PUT",path:this.urlPrefix+"/"+this.user+"/database/"+e+"/stream/"+t,body:{grant:n}},function(e){return e.body})}},{key:"listAccessibleCollections",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/database/"+e+"/collection",qs:{full:t}},function(e){return e.body})}},{key:"listAccessibleStreams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/database/"+e+"/stream",qs:{full:t}},function(e){return e.body})}},{key:"getBillingAccessLevel",value:function(){return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/billing"},function(e){return e.body})}},{key:"clearBillingAccessLevel",value:function(){return this._connection.request({method:"DELETE",path:this.urlPrefix+"/"+this.user+"/billing"},function(e){return e.body})}},{key:"setBillingAccessLevel",value:function(e){return this._connection.request({method:"PUT",path:this.urlPrefix+"/"+this.user+"/billing",body:{grant:e}},function(e){return e.body})}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(9),l=n(53),h=n(54),f=n(55),p=n(56),d=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),u(t,[{key:"useApiKeyAuth",value:function(e){return this._connection.setHeader("authorization","apikey "+e),this}},{key:"loginWithToken",value:function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){var n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.useBearerAuth(t),e.next=3,this.validateApiKey({jwt:t});case 3:if(n=e.sent,r=n.error,i=n.errorMessage,o=n.result,!r){e.next=11;break}throw new Error(i);case 11:a=o.tenant,this.useTenant(a);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"loginWithApiKey",value:function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){var n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.useApiKeyAuth(t),e.next=3,this.validateApiKey({apikey:t});case 3:if(n=e.sent,r=n.error,i=n.errorMessage,o=n.result,!r){e.next=11;break}throw new Error(i);case 11:a=o.tenant,this.useTenant(a);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"createCollection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=void 0;return r=n?this.edgeCollection(e):this.collection(e),r.create(t)}},{key:"deleteCollection",value:function(e,t){return this.collection(e).drop(t)}},{key:"hasCollection",value:function(e){return this.collection(e).exists()}},{key:"getCollection",value:function(e){return this.collection(e).get()}},{key:"getCollections",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.listCollections(e)}},{key:"onCollectionChange",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n,r){var i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocalDc();case 2:return i=e.sent,o=i.tags.url,n&&(o=n),a=this.collection(t),e.abrupt("return",a.onChange(o,r));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDocument",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.collection(e).document(t,n)}},{key:"getDocumentMany",value:function(e,t,n){var r="FOR doc IN "+e+" "+(t?"limit "+(n?n+",":"")+t:"")+" return doc";return this.executeQuery(r)}},{key:"insertDocument",value:function(e,t,n){return this.collection(e).save(t,n)}},{key:"insertDocumentMany",value:function(e,t,n){return this.collection(e).save(t,n)}},{key:"insertDocumentFromFile",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().fromFile(n);case 2:return i=e.sent,o=this.collection(t),e.abrupt("return",o.save(i,r));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateDocument",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.collection(e).update(t,n,r)}},{key:"updateDocumentMany",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.collection(e).updateDocuments(t,n)}},{key:"replaceDocument",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.collection(e).replace(t,n,r)}},{key:"replaceDocumentMany",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.collection(e).replaceDocuments(t,n)}},{key:"deleteDocument",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.collection(e).remove(t,n)}},{key:"deleteDocumentMany",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.collection(e).removeDocuments(t,n)}},{key:"listCollectionIndexes",value:function(e){return this.collection(e).indexes()}},{key:"addHashIndex",value:function(e,t,n){return this.collection(e).createHashIndex(t,n)}},{key:"addGeoIndex",value:function(e,t,n){return this.collection(e).createGeoIndex(t,n)}},{key:"addSkiplistIndex",value:function(e,t,n){return this.collection(e).createSkipList(t,n)}},{key:"addPersistentIndex",value:function(e,t,n){return this.collection(e).createPersistentIndex(t,n)}},{key:"addFullTextIndex",value:function(e,t,n){return this.collection(e).createFulltextIndex(t,n)}},{key:"addTtlIndex",value:function(e,t,n){return this.collection(e).createTtlIndex(t,n)}},{key:"deleteIndex",value:function(e,t){return this.collection(e).dropIndex(t)}},{key:"getCollectionIds",value:function(e){var t="FOR doc IN "+e+" RETURN doc._id";return this.executeQuery(t)}},{key:"getCollectionKeys",value:function(e){var t="FOR doc IN "+e+" RETURN doc._key";return this.executeQuery(t)}},{key:"getCollectionIndexes",value:function(e){return this.collection(e).indexes()}},{key:"executeQuery",value:function(e,t,n){return this.query(e,t,n).then(function(e){return e.all()})}},{key:"getRunningQueries",value:function(){return this.getCurrentQueries()}},{key:"killQuery",value:function(e){return this.terminateRunningQuery(e)}},{key:"createRestql",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.saveQuery(e,n,t)}},{key:"executeRestql",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.executeSavedQuery(e,t)}},{key:"updateRestql",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.updateSavedQuery(e,n,t)}},{key:"deleteRestql",value:function(e){return this.deleteSavedQuery(e)}},{key:"getRestqls",value:function(){return this.listSavedQueries()}},{key:"getDcList",value:function(){return this.getTenantEdgeLocations()}},{key:"getLocalDc",value:function(){return this.getLocalEdgeLocation()}},{key:"createStream",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.stream(e,t,n).createStream()}},{key:"hasStream",value:function(e,t){var n=t?"c8locals."+e:"c8globals."+e;return this.getStreams(!t).then(function(e){return!!e.result.find(function(e){return e.topic===n})},function(e){throw e})}},{key:"getStream",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.stream(e,t,n)}},{key:"getStreamStats",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.stream(e,t,n).getStreamStatistics()}},{key:"createStreamProducer",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocalDc();case 2:return r=e.sent,i=r.tags.url,c&&(i=c),o=this.stream(t,n,u),e.next=8,o.getOtp();case 8:return a=e.sent,e.abrupt("return",o.producer(i,s({},l,{otp:a})));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"createStreamReader",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments[4],h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocalDc();case 2:return i=e.sent,o=i.tags.url,l&&(o=l),a=this.stream(t,r,c),e.next=8,a.getOtp();case 8:return u=e.sent,e.abrupt("return",a.consumer(n,o,s({},h,{otp:u})));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"subscribe",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments[3],l=arguments[4],h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocalDc();case 2:return r=e.sent,i=r.tags.url,l&&(i=l),o=this.stream(t,n,u),e.next=8,o.getOtp();case 8:return a=e.sent,e.abrupt("return",o.consumer(c,i,s({},h,{otp:a})));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"getStreamBacklog",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.stream(e,t,n).backlog()}},{key:"clearStreamBacklog",value:function(e){return this.clearSubscriptionBacklog(e)}},{key:"clearStreamsBacklog",value:function(){return this.clearBacklog()}},{key:"getStreamSubscriptions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.stream(e,t,n).getSubscriptionList()}},{key:"deleteStreamSubscription",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.stream(e,n,r).deleteSubscription(t)}},{key:"validateStreamApp",value:function(e){return this.validateStreamappDefinition(e)}},{key:"retrieveStreamApp",value:function(){return this.getAllStreamApps()}},{key:"deleteStreamApp",value:function(e){return this.streamApp(e).deleteApplication()}},{key:"getStreamApp",value:function(e){return this.streamApp(e).retriveApplication()}},{key:"getStreamAppSamples",value:function(){return this.getSampleStreamApps()}},{key:"activateStreamApp",value:function(e,t){return this.streamApp(e).activateStreamApplication(t)}},{key:"createGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.graph(e).create(t)}},{key:"deleteGraph",value:function(e,t){return this.graph(e).drop(t)}},{key:"hasGraph",value:function(e){return this.graph(e).exists()}},{key:"getGraph",value:function(e){return this.graph(e).get()}},{key:"getGraphs",value:function(){return this.graphs()}},{key:"insertEdge",value:function(e,t){return this.graph(e).addEdgeDefinition(t)}},{key:"updateEdge",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.graph(e).edgeCollection(t).update(n,r,i)}},{key:"replaceEdge",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.graph(e).edgeCollection(t).replace(n,r,i)}},{key:"deleteEdge",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.graph(e).edgeCollection(t).remove(n,r)}},{key:"getEdges",value:function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.graph(t),e.next=3,n.get();case 3:return r=e.sent,e.abrupt("return",r.edgeDefinitions);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"linkEdge",value:function(e,t,n,r){return this.graph(e).create({edgeDefinitions:[{collection:t,from:n,to:r}]})}},{key:"hasUser",value:function(e){return this.user(e).hasUser()}},{key:"createUser",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.user(e,t).createUser(n,r,i)}},{key:"deleteUser",value:function(e){return this.user(e).deleteUser()}},{key:"getUsers",value:function(){return this.getAllUsers()}},{key:"getUser",value:function(e){return this.user(e).getUserDeatils()}},{key:"updateUser",value:function(e,t){return this.user(e).modifyUser(t)}},{key:"replaceUser",value:function(e,t){return this.user(e).replaceUser(t)}},{key:"getPermissions",value:function(e,t){return this.user(e).getAllDatabases(t)}},{key:"getPermission",value:function(e,t,n){var r=this.user(e);return n?r.getCollectionAccessLevel(t,n):r.getDatabaseAccessLevel(t)}},{key:"updatePermission",value:function(e,t,n,r){var i=this.user(e);return r?i.setCollectionAccessLevel(t,r,n):i.setDatabaseAccessLevel(t,n)}},{key:"resetPermission",value:function(e,t,n){var r=this.user(e);return n?r.clearCollectionAccessLevel(t,n):r.clearDatabaseAccessLevel(t)}},{key:"keyValue",value:function(e){return new l.KeyValue(this._connection,e)}},{key:"getKVCollections",value:function(){return this.keyValue("").getCollections()}},{key:"getKVCount",value:function(e){return this.keyValue(e).getKVCount()}},{key:"getKVKeys",value:function(e,t){return this.keyValue(e).getKVKeys(t)}},{key:"getValueForKey",value:function(e,t){return this.keyValue(e).getValueForKey(t)}},{key:"createKVCollection",value:function(e,t){return this.keyValue(e).createCollection(t)}},{key:"insertKVPairs",value:function(e,t){return this.keyValue(e).insertKVPairs(t)}},{key:"deleteEntryForKey",value:function(e,t){return this.keyValue(e).deleteEntryForKey(t)}},{key:"deleteEntryForKeys",value:function(e,t){return this.keyValue(e).deleteEntryForKeys(t)}},{key:"deleteKVCollection",value:function(e){return this.keyValue(e).deleteCollection()}},{key:"apiKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new h.ApiKeys(this._connection,e,t)}},{key:"validateApiKey",value:function(e){return this.apiKeys().validateApiKey(e)}},{key:"createApiKey",value:function(e){return this.apiKeys(e).createApiKey()}},{key:"getAvailableApiKeys",value:function(){return this.apiKeys().getAvailableApiKeys()}},{key:"getAvailableApiKey",value:function(e){return this.apiKeys(e).getAvailableApiKey()}},{key:"removeApiKey",value:function(e){return this.apiKeys(e).removeApiKey()}},{key:"listAccessibleDatabases",value:function(e,t){return this.apiKeys(e).listAccessibleDatabases(t)}},{key:"getDatabaseAccessLevel",value:function(e,t){return this.apiKeys(e,t).getDatabaseAccessLevel()}},{key:"clearDatabaseAccessLevel",value:function(e,t){return this.apiKeys(e,t).clearDatabaseAccessLevel()}},{key:"setDatabaseAccessLevel",value:function(e,t,n){return this.apiKeys(e,t).setDatabaseAccessLevel(n)}},{key:"listAccessibleCollections",value:function(e,t,n){return this.apiKeys(e,t).listAccessibleCollections(n)}},{key:"getCollectionAccessLevel",value:function(e,t,n){return this.apiKeys(e,t).getCollectionAccessLevel(n)}},{key:"clearCollectionAccessLevel",value:function(e,t,n){return this.apiKeys(e,t).clearCollectionAccessLevel(n)}},{key:"setCollectionAccessLevel",value:function(e,t,n,r){return this.apiKeys(e,t).setCollectionAccessLevel(n,r)}},{key:"listAccessibleStreams",value:function(e,t,n){return this.apiKeys(e,t).listAccessibleStreams(n)}},{key:"getStreamAccessLevel",value:function(e,t,n){return this.apiKeys(e,t).getStreamAccessLevel(n)}},{key:"clearStreamAccessLevel",value:function(e,t,n){return this.apiKeys(e,t).clearStreamAccessLevel(n)}},{key:"setStreamAccessLevel",value:function(e,t,n,r){return this.apiKeys(e,t).setStreamAccessLevel(n,r)}},{key:"getBillingAccessLevel",value:function(e){return this.apiKeys(e).getBillingAccessLevel()}},{key:"clearBillingAccessLevel",value:function(e){return this.apiKeys(e).clearBillingAccessLevel()}},{key:"setBillingAccessLevel",value:function(e,t){return this.apiKeys(e).setBillingAccessLevel(t)}},{key:"search",value:function(e){return new f.Search(this._connection,e)}},{key:"setSearch",value:function(e,t,n){return this.search().setSearch(e,t,n)}},{key:"searchInCollection",value:function(e,t,n,r){return this.search().searchInCollection(e,t,n,r)}},{key:"getListOfViews",value:function(){return this.search().getListOfViews()}},{key:"createView",value:function(e,t){return this.search({viewName:e}).createView(t)}},{key:"getViewInfo",value:function(e){return this.search({viewName:e}).getViewInfo()}},{key:"renameView",value:function(e,t){return this.search({viewName:e}).renameView(t)}},{key:"deleteView",value:function(e){return this.search({viewName:e}).deleteView()}},{key:"getViewProperties",value:function(e){return this.search({viewName:e}).getViewProperties()}},{key:"updateViewProperties",value:function(e,t){return this.search({viewName:e}).updateViewProperties(t)}},{key:"getListOfAnalyzers",value:function(){return this.search().getListOfAnalyzers()}},{key:"createAnalyzer",value:function(e,t,n,r){return this.search({analyzerName:e}).createAnalyzer(t,n,r)}},{key:"deleteAnalyzer",value:function(e,t){return this.search({analyzerName:e}).deleteAnalyzer(t)}},{key:"getAnalyzerDefinition",value:function(e){return this.search({analyzerName:e}).getAnalyzerDefinition()}}]),t}(c.Fabric);t.C8Client=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(t,n){r(this,e),this._connection=t,this.name=n}return o(e,[{key:"getCollections",value:function(){return this._connection.request({method:"GET",path:"/_api/kv"},function(e){return e.body})}},{key:"getKVCount",value:function(){return this._connection.request({method:"GET",path:"/_api/kv/"+this.name+"/count"},function(e){return e.body})}},{key:"getKVKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._connection.request({method:"GET",path:"/_api/kv/"+this.name+"/keys",qs:i({},e)},function(e){return e.body})}},{key:"getValueForKey",value:function(e){return this._connection.request({method:"GET",path:"/_api/kv/"+this.name+"/value/"+e},function(e){return e.body})}},{key:"createCollection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"POST",path:"/_api/kv/"+this.name,qs:{expiration:e}},function(e){return e.body})}},{key:"deleteCollection",value:function(){return this._connection.request({method:"DELETE",path:"/_api/kv/"+this.name},function(e){return e.body})}},{key:"deleteEntryForKey",value:function(e){return this._connection.request({method:"DELETE",path:"/_api/kv/"+this.name+"/value/"+e},function(e){return e.body})}},{key:"deleteEntryForKeys",value:function(e){return this._connection.request({method:"DELETE",path:"/_api/kv/"+this.name+"/values",body:e},function(e){return e.body})}},{key:"insertKVPairs",value:function(e){return this._connection.request({method:"PUT",path:"/_api/kv/"+this.name+"/value",body:e},function(e){return e.body})}}]),e}();t.KeyValue=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";r(this,e),this._connection=t,this.keyid=n,this.dbName=i}return i(e,[{key:"validateApiKey",value:function(e){return this._connection.request({method:"POST",path:"/_api/key/validate",body:e},function(e){return e.body})}},{key:"createApiKey",value:function(){return this._connection.request({method:"POST",path:"/_api/key",body:{keyid:this.keyid}},function(e){return e.body})}},{key:"getAvailableApiKeys",value:function(){return this._connection.request({method:"GET",path:"/_api/key"},function(e){return e.body})}},{key:"getAvailableApiKey",value:function(){return this._connection.request({method:"GET",path:"/_api/key/"+this.keyid},function(e){return e.body})}},{key:"removeApiKey",value:function(){return this._connection.request({method:"DELETE",path:"/_api/key/"+this.keyid},function(e){return e.body})}},{key:"listAccessibleDatabases",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"GET",path:"/_api/key/"+this.keyid+"/database",qs:{full:e}},function(e){return e.body})}},{key:"getDatabaseAccessLevel",value:function(){return this._connection.request({method:"GET",path:"/_api/key/"+this.keyid+"/database/"+this.dbName},function(e){return e.body})}},{key:"clearDatabaseAccessLevel",value:function(){return this._connection.request({method:"DELETE",path:"/_api/key/"+this.keyid+"/database/"+this.dbName},function(e){return e.body})}},{key:"setDatabaseAccessLevel",value:function(e){return this._connection.request({method:"PUT",path:"/_api/key/"+this.keyid+"/database/"+this.dbName,body:{grant:e}},function(e){return e.body})}},{key:"listAccessibleCollections",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"GET",path:"/_api/key/"+this.keyid+"/database/"+this.dbName+"/collection",qs:{full:e}},function(e){return e.body})}},{key:"getCollectionAccessLevel",value:function(e){return this._connection.request({method:"GET",path:"/_api/key/"+this.keyid+"/database/"+this.dbName+"/collection/"+e},function(e){return e.body})}},{key:"clearCollectionAccessLevel",value:function(e){return this._connection.request({method:"DELETE",path:"/_api/key/"+this.keyid+"/database/"+this.dbName+"/collection/"+e},function(e){return e.body})}},{key:"setCollectionAccessLevel",value:function(e,t){return this._connection.request({method:"PUT",path:"/_api/key/"+this.keyid+"/database/"+this.dbName+"/collection/"+e,body:{grant:t}},function(e){return e.body})}},{key:"listAccessibleStreams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"GET",path:"/_api/key/"+this.keyid+"/database/"+this.dbName+"/stream",qs:{full:e}},function(e){return e.body})}},{key:"getStreamAccessLevel",value:function(e){return this._connection.request({method:"GET",path:"/_api/key/"+this.keyid+"/database/"+this.dbName+"/stream/"+e},function(e){return e.body})}},{key:"clearStreamAccessLevel",value:function(e){return this._connection.request({method:"DELETE",path:"/_api/key/"+this.keyid+"/database/"+this.dbName+"/stream/"+e},function(e){return e.body})}},{key:"setStreamAccessLevel",value:function(e,t){return this._connection.request({method:"PUT",path:"/_api/key/"+this.keyid+"/database/"+this.dbName+"/stream/"+e,body:{grant:t}},function(e){return e.body})}},{key:"getBillingAccessLevel",value:function(){return this._connection.request({method:"GET",path:"/_api/key/"+this.keyid+"/billing"},function(e){return e.body})}},{key:"clearBillingAccessLevel",value:function(){return this._connection.request({method:"DELETE",path:"/_api/key/"+this.keyid+"/billing"},function(e){return e.body})}},{key:"setBillingAccessLevel",value:function(e){return this._connection.request({method:"PUT",path:"/_api/key/"+this.keyid+"/billing",body:{grant:e}},function(e){return e.body})}}]),e}();t.ApiKeys=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,n){r(this,e),this.viewUrlPrefix="/_api/search/view",this.analyzerUrlPrefix="/_api/search/analyzer",this._connection=t,this._viewName=n&&n.viewName||"",this._analyzerName=n&&n.analyzerName||""}return i(e,[{key:"setSearch",value:function(e,t,n){return this._connection.request({method:"POST",path:"/_api/search/collection/"+e,qs:{enable:t,field:n},absolutePath:!0,body:{}},function(e){return e.body})}},{key:"searchInCollection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60;return this._connection.request({method:"POST",path:"/_api/search",body:{collection:e,search:t,bindVars:n,ttl:r},absolutePath:!0},function(e){return e.body})}},{key:"getListOfViews",value:function(){return this._connection.request({method:"GET",path:""+this.viewUrlPrefix,absolutePath:!0},function(e){return e.body})}},{key:"createView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._connection.request({method:"POST",path:""+this.viewUrlPrefix,body:{type:"search",name:this._viewName,properties:e},absolutePath:!0},function(e){return e.body})}},{key:"getViewInfo",value:function(){return this._connection.request({method:"GET",path:this.viewUrlPrefix+"/"+this._viewName,absolutePath:!0},function(e){return e.body})}},{key:"renameView",value:function(e){return this._connection.request({method:"PUT",path:this.viewUrlPrefix+"/"+this._viewName+"/rename",absolutePath:!0,body:{name:e}},function(e){return e.body})}},{key:"deleteView",value:function(){return this._connection.request({method:"DELETE",path:this.viewUrlPrefix+"/"+this._viewName,absolutePath:!0},function(e){return e.body})}},{key:"getViewProperties",value:function(){return this._connection.request({method:"GET",path:this.viewUrlPrefix+"/"+this._viewName+"/properties",absolutePath:!0},function(e){return e.body})}},{key:"updateViewProperties",value:function(e){return this._connection.request({method:"PUT",path:this.viewUrlPrefix+"/"+this._viewName+"/properties",absolutePath:!0,body:e},function(e){return e.body})}},{key:"getListOfAnalyzers",value:function(){return this._connection.request({method:"GET",path:""+this.analyzerUrlPrefix,absolutePath:!0},function(e){return e.body})}},{key:"createAnalyzer",value:function(e,t,n){return this._connection.request({method:"POST",path:""+this.analyzerUrlPrefix,body:{name:this._analyzerName,type:e,features:n,properties:t},absolutePath:!0},function(e){return e.body})}},{key:"getAnalyzerDefinition",value:function(){return this._connection.request({method:"GET",path:this.analyzerUrlPrefix+"/"+this._analyzerName,absolutePath:!0},function(e){return e.body})}},{key:"deleteAnalyzer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"DELETE",path:this.analyzerUrlPrefix+"/"+this._analyzerName,qs:{force:e},absolutePath:!0},function(e){return e.body})}}]),e}();t.Search=o},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==(void 0===e?"undefined":r(e))&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(t){return e[t]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=32)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);c.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(e){e.end()}var a=n(6),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var u=n(5);u.inherits=n(2);var c=n(23),l=n(14);u.inherits(r,c);for(var h=s(l.prototype),f=0;f<h.length;f++){var p=h[f];r.prototype[p]||(r.prototype[p]=l.prototype[p])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=o.prototype:(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t).__proto__=o.prototype:e=c(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),a=(e=i(e,r)).write(t,n);return a!==r&&(e=e.slice(0,a)),e}(e,t,n):function(e,t){if(o.isBuffer(t)){var n=0|l(t.length);return 0===(e=i(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?i(e,0):c(e,t);if("Buffer"===t.type&&I(t.data))return c(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(s(t),e=i(e,t<0?0:0|l(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t){var n=t.length<0?0:0|l(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function l(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function h(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:d(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):d(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function d(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var a,s=1,u=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,u/=2,c/=2,n/=2}if(i){var l=-1;for(a=n;a<u;a++)if(o(e,a)===o(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===c)return l*s}else-1!==l&&(a-=a-l),l=-1}else for(n+c>u&&(n=u-c),a=n;a>=0;a--){for(var h=!0,f=0;f<c;f++)if(o(e,a+f)!==o(t,f)){h=!1;break}if(h)return a}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function y(e,t,n,r){return D(F(t,e.length-n),e,n,r)}function m(e,t,n,r){return D(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return m(e,t,n,r)}function g(e,t,n,r){return D(N(t),e,n,r)}function b(e,t,n,r){return D(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function w(e,t,n){return 0===t&&n===e.length?M.fromByteArray(e):M.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=B)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=B));return n}(r)}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=q(e[o]);return i}function T(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function R(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,r,i){return i||R(e,0,n,4),U.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||R(e,0,n,8),U.write(e,t,n,r,52,8),n+8}function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function N(e){return M.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}var M=n(38),U=n(39),I=n(40);t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return function(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!I(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),c=this.slice(r,i),l=e.slice(t,n),h=0;h<u;++h)if(c[h]!==l[h]){a=c[h],s=l[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return m(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return g(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;o.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||S(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||S(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),U.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),U.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),U.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),U.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:F(new o(e,r).toString()),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var H=/[^+\/0-9A-Za-z-_]/g}).call(this,n(0))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(){d&&f&&(d=!1,f.length?p=f.concat(p):v=-1,p.length&&a())}function a(){if(!d){var e=i(o);d=!0;for(var t=p.length;t;){for(f=p,p=[];++v<t;)f&&f[v].run();v=-1,t=p.length}f=null,d=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var c,l,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var f,p=[],d=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||d||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==(void 0===e?"undefined":r(e))},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==(void 0===e?"undefined":r(e))&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==(void 0===e?"undefined":r(e))||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(3).Buffer)},function(e,t,n){(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}}:e.exports=t}).call(this,n(4))},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}var o=n(3),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=i),r(a,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,n){var r=n(17)(Object,"create");e.exports=r},function(e,t,n){var r=n(31);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(96);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(35),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"object"==(void 0===e?"undefined":r(e))&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(a(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,u=0;u<r;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(t=e.exports=n(23)).Stream=t,t.Readable=t,t.Writable=n(14),t.Duplex=n(1),t.Transform=n(27),t.PassThrough=n(45)},function(e,t,n){(function(t,r,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(void 0),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}function a(){}function s(e,t){y=y||n(1),e=e||{};var r=t instanceof y;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,a=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(v.nextTick(i,r),v.nextTick(d,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),d(e,t))}(e,n,r,t,i);else{var o=f(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||h(e,n),r?m(l,e,n,o,i):l(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function u(e){if(y=y||n(1),!(g.call(u,this)||this instanceof y))return new u(e);this._writableState=new s(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),w.call(this)}function c(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function l(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),d(e,t)}function h(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,c(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,h=n.encoding,f=n.callback;if(c(e,t,!1,t.objectMode?1:l.length,l,h,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function f(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function p(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),d(e,t)})}function d(e,t){var n=f(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,v.nextTick(p,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}var v=n(6);e.exports=u;var y,m=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:v.nextTick;u.WritableState=s;var _=n(5);_.inherits=n(2);var g,b={deprecate:n(44)},w=n(24),k=n(7).Buffer,E=i.Uint8Array||function(){},x=n(25);_.inherits(u,w),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!g.call(this,e)||this===u&&e&&e._writableState instanceof s}})):g=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&function(e){return k.isBuffer(e)||e instanceof E}(e);return o&&!k.isBuffer(e)&&(e=function(e){return k.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),v.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),v.nextTick(r,o),i=!1),i}(this,r,e,n))&&(r.pendingcb++,i=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=k.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else c(e,t,!1,s,r,i,o);return u}(this,r,o,e,t,n)),i},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||h(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,d(e,t),n&&(t.finished?v.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=x.destroy,u.prototype._undestroy=x.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(4),n(11).setImmediate,n(0))},function(e,t,n){(function(t,n,i){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,n,r){function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=c}function o(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function a(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function s(e){this._normalQueue._pushOne(e),this._queueTick()}var u;try{throw new Error}catch(e){u=e}var c=e("./schedule"),l=e("./queue"),h=e("./util");i.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){h.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},i.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},h.hasDevTools?(i.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},i.prototype.invoke=function(e,t,n){this._trampolineEnabled?a.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},i.prototype.settlePromises=function(e){this._trampolineEnabled?s.call(this,e):this._schedule(function(){e._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=a,i.prototype.settlePromises=s),i.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=u},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new e(t);l._propagateFrom(this,1);var h=this._target();if(l._setBoundTo(c),c instanceof e){var f={promiseRejectionQueued:!1,promise:l,target:h,bindingPromise:c};h._then(t,a,void 0,l,f),c._then(s,u,void 0,l,f),l._setOnCancel(c)}else l._resolveCallback(h);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){function n(e){return function(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+o.classString(e)+" has no method '"+o.toString(n)+"'";throw new t.TypeError(i)}return r}(e,this.pop()).apply(e,this)}function r(e){return e[this]}function i(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var o=e("./util"),a=o.canEvaluate;o.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(n,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=i;else if(a){var n=(void 0)(e);t=null!==n?n:r}else t=r;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){t.exports=function(t,n,r,i){var o=e("./util"),a=o.tryCatch,s=o.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=a(e).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){t.exports=function(t){var n=e("./util"),r=e("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(e,a,s){return function(u){var c=s._boundValue();e:for(var l=0;l<e.length;++l){var h=e[l];if(h===Error||null!=h&&h.prototype instanceof Error){if(u instanceof h)return i(a).call(c,u)}else if("function"==typeof h){var f=i(h).call(c,u);if(f===o)return f;if(f)return i(a).call(c,u)}else if(n.isObject(u)){for(var p=r(h),d=0;d<p.length;++d){var v=p[d];if(h[v]!=u[v])continue e}return i(a).call(c,u)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){t.exports=function(e){function t(){this._trace=new t.CapturedTrace(n())}function n(){var e=i.length-1;if(e>=0)return i[e]}var r=!1,i=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=i.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=function(){if(r)return new t},t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var i=e.prototype._pushContext,o=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,u=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=i,e.prototype._popContext=o,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=u,r=!1},r=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=n,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,n,i){n.exports=function(n,i){function o(e,t){return{promise:t}}function a(){return!1}function s(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+R.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function u(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?R.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function c(){return this._onCancelField}function l(e){this._onCancelField=e}function h(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function d(){this._trace=new x(this._peekContext())}function v(e,t){if(A(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=_(e);R.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),R.notEnumerableProp(e,"__stackCleaned__",!0)}}}function y(e,t,r){if(J.warnings){var i,o=new j(e);if(t)r._attachExtraTrace(o);else if(J.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=_(o);o.stack=a.message+"\n"+a.stack.join("\n")}Q("warning",o)||g(o,"",!0)}}function m(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||N.test(r),o=i&&$(r);i&&!o&&(M&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function _(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||N.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:m(t)}}function g(e,t,n){if("undefined"!=typeof console){var i;if(R.isObject(e)){var o=e.stack;i=t+D(o,e)}else i=t+String(e);"function"==typeof S?S(i,n):"function"!=typeof console.log&&"object"!=r(console.log)||console.log(i)}}function b(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){O.throwLater(e)}"unhandledRejection"===e?Q(e,n,r)||i||g(n,"Unhandled rejection "):Q(e,r)}function w(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():R.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function k(){return"function"==typeof X}function E(e){var t=e.match(Y);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function x(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);X(this,x),t>32&&this.uncycle()}var C,T,S,P=n._getDomain,O=n._async,j=e("./errors").Warning,R=e("./util"),A=R.canAttachTrace,L=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=/\((?:timers\.js):\d+:\d+\)/,F=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,N=null,D=null,M=!1,U=!(0==R.env("BLUEBIRD_DEBUG")),I=!(0==R.env("BLUEBIRD_WARNINGS")||!U&&!R.env("BLUEBIRD_WARNINGS")),B=!(0==R.env("BLUEBIRD_LONG_STACK_TRACES")||!U&&!R.env("BLUEBIRD_LONG_STACK_TRACES")),H=0!=R.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(I||!!R.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){b("rejectionHandled",C,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),b("unhandledRejection",T,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return y(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=P();T="function"==typeof e?null===t?e:R.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=P();C="function"==typeof e?null===t?e:R.domainBind(t,e):void 0};var V=function(){};n.longStackTraces=function(){if(O.haveItemsQueued()&&!J.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!J.longStackTraces&&k()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;J.longStackTraces=!0,V=function(){if(O.haveItemsQueued()&&!J.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,i.deactivateLongStackTraces(),O.enableTrampoline(),J.longStackTraces=!1},n.prototype._captureStackTrace=d,n.prototype._attachExtraTrace=v,i.activateLongStackTraces(),O.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return J.longStackTraces&&k()};var G=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return R.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!R.global.dispatchEvent(n)}}return"function"==typeof Event?(e=new Event("CustomEvent"),R.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!R.global.dispatchEvent(n)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),R.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!R.global.dispatchEvent(n)})}catch(e){}return function(){return!1}}(),K=R.isNode?function(){return t.emit.apply(t,arguments)}:R.global?function(e){var t="on"+e.toLowerCase(),n=R.global[t];return!!n&&(n.apply(R.global,[].slice.call(arguments,1)),!0)}:function(){return!1},z={promiseCreated:o,promiseFulfilled:o,promiseRejected:o,promiseResolved:o,promiseCancelled:o,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:o},Q=function(e){var t=!1;try{t=K.apply(null,arguments)}catch(e){O.throwLater(e),t=!0}var n=!1;try{n=G(e,z[e].apply(null,arguments))}catch(e){O.throwLater(e),n=!0}return n||t};n.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&V()),"warnings"in e){var t=e.warnings;J.warnings=!!t,H=J.warnings,R.isObject(t)&&"wForgottenReturn"in t&&(H=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!J.cancellation){if(O.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=h,n.prototype._propagateFrom=f,n.prototype._onCancel=c,n.prototype._setOnCancel=l,n.prototype._attachCancellationCallback=u,n.prototype._execute=s,W=f,J.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!J.monitoring?(J.monitoring=!0,n.prototype._fireEvent=Q):!e.monitoring&&J.monitoring&&(J.monitoring=!1,n.prototype._fireEvent=a)),n},n.prototype._fireEvent=a,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var W=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)},$=function(){return!1},Y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;R.inherits(x,Error),i.CapturedTrace=x,x.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<e;++r){var a=n[t[r].stack];if(void 0!==a&&a!==r){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var s=r>0?t[r-1]:this;a<e-1?(s._parent=t[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var u=s._length+1,c=r-2;c>=0;--c)t[c]._length=u,u++;return}}}},x.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=_(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(m(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(s=a;s>=0;--s){var u=r[s];if(t[i]!==u)break;t.pop(),i--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),R.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),R.notEnumerableProp(e,"__stackCleaned__",!0)}};var X=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():w(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,N=e,D=t;var n=Error.captureStackTrace;return $=function(e){return L.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var i,o=new Error;if("string"==typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0)return N=/@/,D=t,M=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){i="stack"in e}return"stack"in o||!i||"number"!=typeof Error.stackTraceLimit?(D=function(e,t){return"string"==typeof e?e:"object"!=(void 0===t?"undefined":r(t))&&"function"!=typeof t||void 0===t.name||void 0===t.message?w(t):t.toString()},null):(N=e,D=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(S=function(e){console.warn(e)},R.isNode&&t.stderr.isTTY?S=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:R.isNode||"string"!=typeof(new Error).stack||(S=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var J={warnings:I,longStackTraces:!1,cancellation:!1,monitoring:!1};return B&&n.longStackTraces(),{longStackTraces:function(){return J.longStackTraces},warnings:function(){return J.warnings},cancellation:function(){return J.cancellation},monitoring:function(){return J.monitoring},propagateFromFunction:function(){return W},boundValueFunction:function(){return p},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&H){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),u=m(s),c=u.length-1;c>=0;--c){var l=u[c];if(!q.test(l)){var h=l.match(F);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(u.length>0){var f=u[0];for(c=0;c<s.length;++c)if(s[c]===f){c>0&&(a="\n"+s[c-1]);break}}}var p="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(p,!0,t)}},setBounds:function(e,t){if(k()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),a=-1,s=-1,u=0;u<i.length;++u)if(c=E(i[u])){n=c.fileName,a=c.line;break}for(u=0;u<o.length;++u){var c;if(c=E(o[u])){r=c.fileName,s=c.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||($=function(e){if(L.test(e))return!0;var t=E(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=s)})}},warn:y,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),y(n)},CapturedTrace:x,fireDomEvent:G,fireGlobalEvent:K}}},{"./errors":12,"./util":36}],10:[function(e,t,n){t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];return r instanceof e&&r.suppressUnhandledRejections(),this.caught(n,function(){return r})}}},{}],11:[function(e,t,n){t.exports=function(e,t){function n(){return i(this)}var r=e.reduce,i=e.all;e.prototype.each=function(e){return r(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,i){return r(e,i,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,n){function r(e,t){function n(r){if(!(this instanceof n))return new n(r);h(this,"message","string"==typeof r?r:t),h(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}function i(e){if(!(this instanceof i))return new i(e);h(this,"name","OperationalError"),h(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(h(this,"message",e.message),h(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var o,a,s=e("./es5"),u=s.freeze,c=e("./util"),l=c.inherits,h=c.notEnumerableProp,f=r("Warning","warning"),p=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(e){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m)"function"==typeof Array.prototype[y[m]]&&(v.prototype[y[m]]=Array.prototype[y[m]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var _=0;v.prototype.toString=function(){var e=Array(4*_+1).join(" "),t="\n"+e+"AggregateError of:\n";_++,e=Array(4*_+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return _--,t},l(i,Error);var g=Error.__BluebirdErrorTypes__;g||(g=u({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){t.exports=function(t,n,r){function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function o(e){this.finallyHandler=e}function a(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function s(){return c.call(this,this.promise._target()._settledValue())}function u(e){if(!a(this,e))return f.e=e,f}function c(e){var i=this.promise,c=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?c.call(i._boundValue()):c.call(i._boundValue(),e);if(l===r)return l;if(void 0!==l){i._setReturnedNonUndefined();var p=n(l,i);if(p instanceof t){if(null!=this.cancelPromise){if(p._isCancelled()){var d=new h("late cancellation observer");return i._attachExtraTrace(d),f.e=d,f}p.isPending()&&p._attachCancellationCallback(new o(this))}return p._then(s,u,void 0,this,void 0)}}}return i.isRejected()?(a(this),f.e=e,f):(a(this),e)}var l=e("./util"),h=t.CancellationError,f=l.errorObj,p=e("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){a(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new i(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,c,c)},t.prototype.tap=function(e){return this._passThrough(e,1,c)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,c);var r,i=new Array(n-1),o=0;for(r=0;r<n-1;++r){var a=arguments[r];if(!l.isObject(a))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+l.classString(a)));i[o++]=a}i.length=o;var s=arguments[r];return this._passThrough(p(i,s,this),1,void 0,c)},i}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){t.exports=function(t,n,r,i,o,a){function s(e,n,i,o){if(a.cancellation()){var s=new t(r),u=this._finallyPromise=new t(r);this._promise=s.lastly(function(){return u}),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new t(r))._captureStackTrace();this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}var u=e("./errors").TypeError,c=e("./util"),l=c.errorObj,h=c.tryCatch,f=[];c.inherits(s,o),s.prototype._isResolved=function(){return null===this._promise},s.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},s.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=h(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},s.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=h(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=h(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},s.prototype._continue=function(e){var n=this._promise;if(e===l)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof t||null!==(o=function(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=h(n[o])(e);if(r._popContext(),a===l){r._pushContext();var s=t.reject(l.e);return r._popContext(),s}var u=i(a,r);if(u instanceof t)return u}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=s,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=t,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("expecting a function but got "+c.classString(e));f.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new s(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){t.exports=function(t,n,r,i,o,a){var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj,t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var r=[].slice.call(arguments);e&&r.pop();var i=new n(r).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,n){t.exports=function(t,n,i,o,a,s){function u(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=l();this._callback=null===i?t:h.domainBind(i,t),this._preservedValues=r===a?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function c(e,n,o,a){if("function"!=typeof n)return i("expecting a function but got "+h.classString(n));var s=0;if(void 0!==o){if("object"!=(void 0===o?"undefined":r(o))||null===o)return t.reject(new TypeError("options argument must be an object but it is "+h.classString(o)));if("number"!=typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+h.classString(o.concurrency)));s=o.concurrency}return new u(e,n,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,a).promise()}var l=t._getDomain,h=e("./util"),f=h.tryCatch,p=h.errorObj,d=t._async;h.inherits(u,n),u.prototype._asyncInit=function(){this._init$(void 0,-2)},u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,n){var r=this._values,i=this.length(),a=this._preservedValues,u=this._limit;if(n<0){if(r[n=-1*n-1]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var c=this._promise,l=this._callback,h=c._boundValue();c._pushContext();var d=f(l).call(h,e,n,i),v=c._popContext();if(s.checkForgottenReturns(d,v,null!==a?"Promise.filter":"Promise.map",c),d===p)return this._reject(d.e),!0;var y=o(d,this._promise);if(y instanceof t){var m=(y=y._target())._bitField;if(0==(50397184&m))return u>=1&&this._inFlight++,r[n]=y,y._proxy(this,-1*(n+1)),!1;if(0==(33554432&m))return 0!=(16777216&m)?(this._reject(y._reason()),!0):(this._cancel(),!0);d=y._value()}r[n]=d}return++this._totalResolved>=i&&(null!==a?this._filter(r,a):this._resolve(r),!0)},u.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},u.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},u.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return c(this,e,t,null)},t.map=function(e,t,n,r){return c(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){t.exports=function(t,n,r,i,o){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=s(e).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+a.classString(e));var r,u=new t(n);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];r=a.isArray(c)?s(e).apply(l,c):s(e).call(l,c)}else r=s(e)();var h=u._popContext();return o.checkForgottenReturns(r,h,"Promise.try",u),u._resolveFromSyncValue(r),u},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){function r(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new a(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=s.keys(e),r=0;r<n.length;++r){var o=n[r];u.test(o)||(t[o]=e[o])}return t}return i.markAsOriginatingFromRejection(e),e}var i=e("./util"),o=i.maybeWrapAsError,a=e("./errors").OperationalError,s=e("./es5"),u=/^(?:name|message|stack|cause)$/;t.exports=function(e,t){return function(n,i){if(null!==e){if(n){var a=r(o(n));e._attachExtraTrace(a),e._reject(a)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(i);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){t.exports=function(t){function n(e,t){if(!o.isArray(e))return r.call(this,e,t);var n=s(t).apply(this._boundValue(),[null].concat(e));n===u&&a.throwLater(n.e)}function r(e,t){var n=this._boundValue(),r=void 0===e?s(t).call(n,null):s(t).call(n,null,e);r===u&&a.throwLater(r.e)}function i(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var r=s(t).call(this._boundValue(),e);r===u&&a.throwLater(r.e)}var o=e("./util"),a=t._async,s=o.tryCatch,u=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var o=r;void 0!==t&&Object(t).spread&&(o=n),this._then(o,i,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){n.exports=function(){function r(){}function i(e){e!==b&&function(e,t){if(null==e||e.constructor!==i)throw new _("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new _("expecting a function but got "+p.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(e){this.promise._resolveCallback(e)}function a(e){this.promise._rejectCallback(e,!1)}function s(e){var t=new i(b);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var u,c=function(){return new _("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new i.PromiseInspection(this._target())},h=function(e){return i.reject(new _(e))},f={},p=e("./util");u=p.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},p.notEnumerableProp(i,"_getDomain",u);var d=e("./es5"),v=e("./async"),y=new v;d.defineProperty(i,"_async",{value:y});var m=e("./errors"),_=i.TypeError=m.TypeError;i.RangeError=m.RangeError;var g=i.CancellationError=m.CancellationError;i.TimeoutError=m.TimeoutError,i.OperationalError=m.OperationalError,i.RejectionError=m.OperationalError,i.AggregateError=m.AggregateError;var b=function(){},w={},k={},E=e("./thenables")(i,b),x=e("./promise_array")(i,b,E,h,r),C=e("./context")(i),T=C.create,S=e("./debuggability")(i,C),P=(S.CapturedTrace,e("./finally")(i,E,k)),O=e("./catch_filter")(k),j=e("./nodeback"),R=p.errorObj,A=p.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if(!p.isObject(o))return h("Catch statement predicate: expecting an object but got "+p.classString(o));r[i++]=o}return r.length=i,e=arguments[n],this.then(void 0,O(r,e,this))}return this.then(void 0,e)},i.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},i.prototype.then=function(e,t){if(S.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+p.classString(e);arguments.length>1&&(n+=", "+p.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},i.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},i.prototype.spread=function(e){return"function"!=typeof e?h("expecting a function but got "+p.classString(e)):this.all()._then(e,void 0,void 0,w,void 0)},i.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new x(this).promise()},i.prototype.error=function(e){return this.caught(p.originatesFromRejection,e)},i.getNewLibraryCopy=n.exports,i.is=function(e){return e instanceof i},i.fromNode=i.fromCallback=function(e){var t=new i(b);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=A(e)(j(t,n));return r===R&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},i.all=function(e){return new x(e).promise()},i.cast=function(e){var t=E(e);return t instanceof i||((t=new i(b))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(e){var t=new i(b);return t._captureStackTrace(),t._rejectCallback(e,!0),t},i.setScheduler=function(e){if("function"!=typeof e)throw new _("expecting a function but got "+p.classString(e));return y.setScheduler(e)},i.prototype._then=function(e,t,n,r,o){var a=void 0!==o,s=a?o:new i(b),c=this._target(),l=c._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var h=u();if(0!=(50397184&l)){var f,d,v=c._settlePromiseCtx;0!=(33554432&l)?(d=c._rejectionHandler0,f=e):0!=(16777216&l)?(d=c._fulfillmentHandler0,f=t,c._unsetRejectionIsUnhandled()):(v=c._settlePromiseLateCancellationObserver,d=new g("late cancellation observer"),c._attachExtraTrace(d),f=t),y.invoke(v,c,{handler:null===h?f:"function"==typeof f&&p.domainBind(h,f),promise:s,receiver:r,value:d})}else c._addCallbacks(e,t,s,r,h);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},i.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){y.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==f)return void 0===t&&this._isBound()?this._boundValue():t},i.prototype._promiseAt=function(e){return this[4*e-4+2]},i.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},i.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=f),this._addCallbacks(t,n,r,i,null)},i.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=f),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:p.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:p.domainBind(i,t));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===i?e:p.domainBind(i,e)),"function"==typeof t&&(this[a+1]=null===i?t:p.domainBind(i,t))}return this._setLength(o+1),o},i.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},i.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(c(),!1);var n=E(e,this);if(!(n instanceof i))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var o=r._bitField;if(0==(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var u=new g("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}else this._reject(c())}},i.prototype._rejectCallback=function(e,t,n){var r=p.ensureErrorObject(e),i=r===e;if(!i&&!n&&S.warnings()){var o="a promise was rejected with a non-error: "+p.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},i.prototype._resolveFromExecutor=function(e){if(e!==b){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},i.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===w?n&&"number"==typeof n.length?o=A(e).apply(this._boundValue(),n):(o=R).e=new _("cannot .spread() a non-array: "+p.classString(n)):o=A(e).call(t,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===k?r._reject(n):o===R?r._rejectCallback(o.e,!1):(S.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(e){this._rejectionHandler0=e},i.prototype._settlePromise=function(e,t,n,o){var a=e instanceof i,s=this._bitField,u=0!=(134217728&s);0!=(65536&s)?(a&&e._invokeInternalOnCancel(),n instanceof P&&n.isFinallyHandler()?(n.cancelPromise=e,A(t).call(n,o)===R&&e._reject(R.e)):t===l?e._fulfill(l.call(n)):n instanceof r?n._promiseCancelled(e):a||e instanceof x?e._cancel():n.cancel()):"function"==typeof t?a?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,o,e)):t.call(n,o,e):n instanceof r?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(o,e):n._promiseRejected(o,e)):a&&(u&&e._setAsyncGuaranteed(),0!=(33554432&s)?e._fulfill(o):e._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,o=e.value;"function"==typeof t?n instanceof i?this._settlePromiseFromHandler(t,r,o,n):t.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},i.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},i.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},i.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():y.settlePromises(this))}},i.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return y.fatalError(e,p.isNode);(65535&t)>0?y.settlePromises(this):this._ensurePossibleRejectionHandled()}},i.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},i.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},i.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){return S.deprecated("Promise.defer","new Promise"),{promise:new i(b),resolve:o,reject:a}},p.notEnumerableProp(i,"_makeSelfResolutionError",c),e("./method")(i,b,E,h,S),e("./bind")(i,b,E,S),e("./cancel")(i,x,h,S),e("./direct_resolve")(i),e("./synchronous_inspection")(i),e("./join")(i,x,E,b,y,u),i.Promise=i,i.version="3.5.1",e("./map.js")(i,x,h,E,b,S),e("./call_get.js")(i),e("./using.js")(i,h,E,T,b,S),e("./timers.js")(i,b,S),e("./generators.js")(i,h,b,E,r,S),e("./nodeify.js")(i),e("./promisify.js")(i,b),e("./props.js")(i,x,E,h),e("./race.js")(i,b,E,h),e("./reduce.js")(i,x,h,E,b,S),e("./settle.js")(i,x,S),e("./some.js")(i,x,h),e("./filter.js")(i,b),e("./each.js")(i,b),e("./any.js")(i),p.toFastProperties(i),p.toFastProperties(i.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new i(b)),S.setBounds(v.firstLineError,p.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){t.exports=function(t,n,r,i,o){function a(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=e("./util");return s.isArray,s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,o){var a=r(this._values,this._promise);if(a instanceof t){var u=(a=a._target())._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(o){case-2:return[];case-3:return{};case-6:return new Map}}());else{var c=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(c,!1)}},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var u=r(e[s],i);a=u instanceof t?(u=u._target())._bitField:null,o?null!==a&&u.suppressUnhandledRejections():null!==a?0==(50397184&a)?(u._proxy(this,s),this._values[s]=u):o=0!=(33554432&a)?this._promiseFulfilled(u._value(),s):0!=(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(u,s)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){t.exports=function(t,n){function i(e){return!m.test(e)}function o(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function a(e,t,n){var r=l.getDataPropertyOrDefault(e,t+n,y);return!!r&&o(r)}function s(e,t,n,r){for(var i=l.inheritedDataKeys(e),s=[],u=0;u<i.length;++u){var c=i[u],h=e[c],f=r===_||_(c,h,e);"function"!=typeof h||o(h)||a(e,c,t)||!r(c,h,e,f)||s.push(c,h)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new v("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,n),s}function u(e,t,n,r,i){for(var o=new RegExp(g(t)+"$"),a=s(e,t,o,n),u=0,h=a.length;u<h;u+=2){var f=a[u],p=a[u+1],d=f+t;if(r===b)e[d]=b(f,c,f,p,t,i);else{var v=r(p,function(){return b(f,c,f,p,t,i)});l.notEnumerableProp(v,"__isPromisified__",!0),e[d]=v}}return l.toFastProperties(e),e}var c={},l=e("./util"),h=e("./nodeback"),f=l.withAppended,p=l.maybeWrapAsError,d=l.canEvaluate,v=e("./errors").TypeError,y={__isPromisified__:!0},m=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),_=function(e){return l.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},g=function(e){return e.replace(/([$])/,"\\$")},b=d?void 0:function(e,r,i,o,a,s){function u(){var i=r;r===c&&(i=this);var o=new t(n);o._captureStackTrace();var a="string"==typeof v&&this!==d?this[v]:e,u=h(o,s);try{a.apply(i,f(arguments,u))}catch(e){o._rejectCallback(p(e),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var d=function(){return this}(),v=e;return"string"==typeof v&&(e=o),l.notEnumerableProp(u,"__isPromisified__",!0),u};t.promisify=function(e,t){if("function"!=typeof e)throw new v("expecting a function but got "+l.classString(e));if(o(e))return e;var n=void 0===(t=Object(t)).context?c:t.context,r=!!t.multiArgs,a=function(e,t,n){return b(e,t,void 0,e,null,r)}(e,n);return l.copyDescriptors(e,a,i),a},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=(void 0===e?"undefined":r(e)))throw new v("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,i=t.suffix;"string"!=typeof i&&(i="Async");var o=t.filter;"function"!=typeof o&&(o=_);var a=t.promisifier;if("function"!=typeof a&&(a=b),!l.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=l.inheritedDataKeys(e),c=0;c<s.length;++c){var h=e[s[c]];"constructor"!==s[c]&&l.isClass(h)&&(u(h.prototype,i,o,a,n),u(h,i,o,a,n))}return u(e,i,o,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){t.exports=function(t,n,r,i){function o(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=h(e),n=!0;else{var r=l.keys(e),i=r.length;t=new Array(2*i);for(var o=0;o<i;++o){var a=r[o];t[o]=e[a],t[o+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function a(e){var n,a=r(e);return c(a)?(n=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof t&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,u=e("./util"),c=u.isObject,l=e("./es5");"function"==typeof Map&&(s=Map);var h=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var i=new Array(2*r.size);return r.forEach(e,i),i}}();u.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new s,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],o=e[r];t.set(i,o)}return t}(this._values);else{n={};for(var r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+0],e[o+0]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){t.exports=function(t,n,r,i){function o(e,o){var u=r(e);if(u instanceof t)return s(u);if(null===(e=a.asArray(e)))return i("expecting an array or an iterable object but got "+a.classString(e));var c=new t(n);void 0!==o&&c._propagateFrom(o,3);for(var l=c._fulfill,h=c._reject,f=0,p=e.length;f<p;++f){var d=e[f];(void 0!==d||f in e)&&t.cast(d)._then(l,h,void 0,c,null)}return c}var a=e("./util"),s=function(e){return e.then(function(t){return o(t,e)})};t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(e,t,n){t.exports=function(t,n,r,i,o,a){function s(e,n,r,i){this.constructor$(e);var a=f();this._fn=null===a?n:p.domainBind(a,n),void 0!==r&&(r=t.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function c(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+p.classString(t)):new s(e,t,n,i).promise()}function l(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(e){var n,r=this.array,i=r._promise,o=d(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(r._currentCancellable=n);var s=i._popContext();return a.checkForgottenReturns(n,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}var f=t._getDomain,p=e("./util"),d=p.tryCatch;p.inherits(s,n),s.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},s.prototype._iterate=function(e){var n,r;this._values=e;var i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},t.prototype.reduce=function(e,t){return c(this,e,t,null)},t.reduce=function(e,t,n,r){return c(e,t,n,r)}}},{"./util":36}],29:[function(e,r,o){var a,s=e("./util"),u=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,l=t.nextTick;a=s.isRecentNode?function(e){c.call(n,e)}:function(e){l.call(t,e)}}else if("function"==typeof u&&"function"==typeof u.resolve){var h=u.resolve();a=function(e){h.then(e)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==i?function(e){i(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");return new MutationObserver(function(){e.classList.toggle("foo"),n=!1}).observe(r,t),function(i){var o=new MutationObserver(function(){o.disconnect(),i()});o.observe(e,t),n||(n=!0,r.classList.toggle("foo"))}}();r.exports=a},{"./util":36}],30:[function(e,t,n){t.exports=function(t,n,r){function i(e){this.constructor$(e)}var o=t.PromiseInspection;e("./util").inherits(i,n),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new o;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new o;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){t.exports=function(t,n,r){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),o=n.promise();return n.setHowMany(t),n.init(),o}var a=e("./util"),s=e("./errors").RangeError,u=e("./errors").AggregateError,c=a.isArray,l={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=c(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new u,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(e,t,n){t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){t.exports=function(t,n){var r=e("./util"),i=r.errorObj,o=r.isObject,a={}.hasOwnProperty;return function(e,s){if(o(e)){if(e instanceof t)return e;var u=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(e);if(u===i){s&&s._pushContext();var c=t.reject(u.e);return s&&s._popContext(),c}if("function"==typeof u)return function(e){try{return a.call(e,"_promise0")}catch(e){return!1}}(e)?(c=new t(n),e._then(c._fulfill,c._reject,void 0,c,null),c):function(e,o,a){var s=new t(n),u=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var c=!0,l=r.tryCatch(o).call(e,function(e){s&&(s._resolveCallback(e),s=null)},function(e){s&&(s._rejectCallback(e,c,!0),s=null)});return c=!1,s&&l===i&&(s._rejectCallback(l.e,!0,!0),s=null),u}(e,u,s)}return e}}},{"./util":36}],34:[function(e,t,n){t.exports=function(t,n,r){function i(e){this.handle=e}function o(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var s=e("./util"),u=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,o){var a,s;return void 0!==o?(a=t.resolve(o)._then(c,null,null,e,void 0),r.cancellation()&&o instanceof t&&a._setOnCancel(o)):(a=new t(n),s=setTimeout(function(){a._fulfill()},+e),r.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};t.prototype.delay=function(e){return l(e,this)},t.prototype.timeout=function(e,t){var n,c;e=+e;var l=new i(setTimeout(function(){n.isPending()&&function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new u("operation timed out"):new u(t),s.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()}(n,t,c)},e));return r.cancellation()?(c=this.then(),(n=c._then(o,a,void 0,l,void 0))._setOnCancel(l)):n=this._then(o,a,void 0,l,void 0),n}}},{"./util":36}],35:[function(e,t,n){t.exports=function(t,n,r,i,o,a){function s(e){setTimeout(function(){throw e},0)}function u(e,n){var i=0,a=e.length,u=new t(o);return function o(){if(i>=a)return u._fulfill();var c=function(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(c instanceof t&&c._isDisposable()){try{c=r(c._getDisposer().tryDispose(n),e.promise)}catch(e){return s(e)}if(c instanceof t)return c._then(o,s,null,null,null)}o()}(),u}function c(e,t,n){this._data=e,this._promise=t,this._context=n}function l(e,t,n){this.constructor$(e,t,n)}function h(e){return c.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function f(e){this.length=e,this.promise=null,this[e-1]=null}var p=e("./util"),d=e("./errors").TypeError,v=e("./util").inherits,y=p.errorObj,m=p.tryCatch,_={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():_},c.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==_?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},c.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},v(l,c),l.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},f.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[e-1];if("function"!=typeof o)return n("expecting a function but got "+p.classString(o));var s=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,s=!1):(i=arguments,e--);for(var l=new f(e),d=0;d<e;++d){var v=i[d];if(c.isDisposer(v)){var _=v;(v=v.promise())._setDisposable(_)}else{var g=r(v);g instanceof t&&(v=g._then(h,null,null,{resources:l,index:d},void 0))}l[d]=v}var b=new Array(l.length);for(d=0;d<b.length;++d)b[d]=t.resolve(l[d]).reflect();var w=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}k._pushContext(),o=m(o);var r=s?o.apply(void 0,e):o(e),i=k._popContext();return a.checkForgottenReturns(r,i,"Promise.using",k),r}),k=w.lastly(function(){var e=new t.PromiseInspection(w);return u(l,e)});return l.promise=k,k._setOnCancel(l),k},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new l(e,this,i());throw new d}}},{"./errors":12,"./util":36}],36:[function(e,i,o){function a(){try{var e=p;return p=null,e.apply(this,arguments)}catch(e){return y.e=e,y}}function s(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function u(e,t,n){if(s(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return d.defineProperty(e,t,r),e}function c(e){try{return e+""}catch(e){return"[no string representation]"}}function l(e){return e instanceof Error||null!==e&&"object"==(void 0===e?"undefined":r(e))&&"string"==typeof e.message&&"string"==typeof e.name}function h(e){return l(e)&&d.propertyIsWritable(e,"stack")}function f(e){return{}.toString.call(e)}var p,d=e("./es5"),v="undefined"==typeof navigator,y={e:{}},m="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null,_=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(d.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(e){return r}for(var a=0;a<o.length;++a){var s=o[a];if(!i[s]){i[s]=!0;var u=Object.getOwnPropertyDescriptor(e,s);null!=u&&null==u.get&&null==u.set&&r.push(s)}}e=d.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<e.length;++a)if(r.call(e[a],o))continue e;i.push(o)}return i}}(),g=/this\s*\.\s*\S+\s*=/,b=/^[a-z$_][a-z$_0-9]*$/i,w="stack"in new Error?function(e){return h(e)?e:new Error(c(e))}:function(e){if(h(e))return e;try{throw new Error(c(e))}catch(e){return e}},k=function(e){return d.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var E="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};k=function(e){return d.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?E(e):null}}var x=void 0!==t&&"[object process]"===f(t).toLowerCase(),C=void 0!==t&&void 0!==t.env,T={isClass:function(e){try{if("function"==typeof e){var t=d.names(e.prototype),n=d.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=g.test(e+"")&&d.names(e).length>0;if(n||r||i)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return b.test(e)},inheritedDataKeys:_,getDataPropertyOrDefault:function(e,t,n){if(!d.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(e){throw e},isArray:d.isArray,asArray:k,notEnumerableProp:u,isPrimitive:s,isObject:function(e){return"function"==typeof e||"object"==(void 0===e?"undefined":r(e))&&null!==e},isError:l,canEvaluate:v,errorObj:y,tryCatch:function(e){return p=e,a},inherits:function(e,t){function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},withAppended:function(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i},maybeWrapAsError:function(e){return s(e)?new Error(c(e)):e},toFastProperties:function(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e},filledRange:function(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r},toString:c,canAttachTrace:h,ensureErrorObject:w,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{u(e,"isOperational",!0)}catch(e){}},classString:f,copyDescriptors:function(e,t,n){for(var r=d.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{d.defineProperty(t,o,d.getDescriptor(e,o))}catch(e){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:x,hasEnvVariables:C,env:function(e){return C?t.env[e]:void 0},global:m,getNativePromise:function(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}},domainBind:function(e,t){return e.bind(t)}};T.isRecentNode=T.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),T.isNode&&T.toFastProperties(t);try{throw new Error}catch(e){T.lastLineError=e}i.exports=T},{"./es5":13}]},{},[4])(4),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(4),n(0),n(11).setImmediate)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t.eol&&e)for(var n=0,r=e.length;n<r;n++)if("\r"===e[n]){if("\n"===e[n+1]){t.eol="\r\n";break}if(e[n+1]){t.eol="\r";break}}else if("\n"===e[n]){t.eol="\n";break}return t.eol||"\n"}},function(e,t,n){var r=n(65),i=n(73);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(19).Symbol;e.exports=r},function(e,t,n){var i=n(67),o="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=i||o||Function("return this")();e.exports=a},function(e,t){e.exports=function(e){var t=void 0===e?"undefined":r(e);return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var i=n(30),o=n(76);e.exports=function(e){return"symbol"==(void 0===e?"undefined":r(e))||o(e)&&"[object Symbol]"==i(e)}},function(e,t,n){(function(t,r){function i(e,t){w=w||n(1),e=e||{};var r=t instanceof w;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new R,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(j||(j=n(26).StringDecoder),this.decoder=new j(e.encoding),this.encoding=e.encoding)}function o(e){if(w=w||n(1),!(this instanceof o))return new o(e);this._readableState=new i(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),x.call(this)}function a(e,t,n,r,i){var o,a=e._readableState;return null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,c(e)}}(e,a)):(i||(o=function(e,t){var n;return function(e){return C.isBuffer(e)||e instanceof T}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===C.prototype||(t=function(e){return C.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):s(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?s(e,a,t,!1):h(e,a)):s(e,a,t,!1))):r||(a.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function s(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&c(e)),h(e,t)}function u(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function c(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(O("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?b.nextTick(l,e):l(e))}function l(e){O("emit readable"),e.emit("readable"),v(e)}function h(e,t){t.readingMore||(t.readingMore=!0,b.nextTick(f,e,t))}function f(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(O("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function p(e){O("readable nexttick read 0"),e.read(0)}function d(e,t){t.reading||(O("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;for(O("flow",t.flowing);t.flowing&&null!==e.read(););}function y(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0==(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=C.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0==(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function m(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,b.nextTick(_,t,e))}function _(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function g(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var b=n(6);e.exports=o;var w,k=n(37);o.ReadableState=i,n(12).EventEmitter;var E=function(e,t){return e.listeners(t).length},x=n(24),C=n(7).Buffer,T=t.Uint8Array||function(){},S=n(5);S.inherits=n(2);var P=n(41),O=void 0;O=P&&P.debuglog?P.debuglog("stream"):function(){};var j,R=n(42),A=n(25);S.inherits(o,x);var L=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),o.prototype.destroy=A.destroy,o.prototype._undestroy=A.undestroy,o.prototype._destroy=function(e,t){this.push(null),t(e)},o.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=C.from(e,t),t=""),n=!0),a(this,e,t,!1,n)},o.prototype.unshift=function(e){return a(this,e,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(e){return j||(j=n(26).StringDecoder),this._readableState.decoder=new j(e),this._readableState.encoding=e,this};var q=8388608;o.prototype.read=function(e){O("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return O("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?m(this):c(this),null;if(0===(e=u(e,t))&&t.ended)return 0===t.length&&m(this),null;var r,i=t.needReadable;return O("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&O("length less than watermark",i=!0),t.ended||t.reading?O("reading or ended",i=!1):i&&(O("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=u(n,t))),null===(r=e>0?y(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&m(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function n(){O("onend"),e.end()}function i(t){O("ondata"),d=!1,!1!==e.write(t)||d||((1===l.pipesCount&&l.pipes===e||l.pipesCount>1&&-1!==g(l.pipes,e))&&!p&&(O("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,d=!0),c.pause())}function o(t){O("onerror",t),u(),e.removeListener("error",o),0===E(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",s),u()}function s(){O("onfinish"),e.removeListener("close",a),u()}function u(){O("unpipe"),c.unpipe(e)}var c=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=e;break;case 1:l.pipes=[l.pipes,e];break;default:l.pipes.push(e)}l.pipesCount+=1,O("pipe count=%d opts=%j",l.pipesCount,t);var h=t&&!1===t.end||e===r.stdout||e===r.stderr?u:n;l.endEmitted?b.nextTick(h):c.once("end",h),e.on("unpipe",function t(r,h){O("onunpipe"),r===c&&h&&!1===h.hasUnpiped&&(h.hasUnpiped=!0,O("cleanup"),e.removeListener("close",a),e.removeListener("finish",s),e.removeListener("drain",f),e.removeListener("error",o),e.removeListener("unpipe",t),c.removeListener("end",n),c.removeListener("end",u),c.removeListener("data",i),p=!0,!l.awaitDrain||e._writableState&&!e._writableState.needDrain||f())});var f=function(e){return function(){var t=e._readableState;O("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&E(e,"data")&&(t.flowing=!0,v(e))}}(c);e.on("drain",f);var p=!1,d=!1;return c.on("data",i),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?k(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",o),e.once("close",a),e.once("finish",s),e.emit("pipe",c),l.flowing||(O("pipe resume"),c.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=g(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},o.prototype.on=function(e,t){var n=x.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&c(this):b.nextTick(p,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(O("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,b.nextTick(d,e,t))}(this,e)),this},o.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(O("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){O("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<L.length;o++)e.on(L[o],this.emit.bind(this,L[o]));return this._read=function(t){O("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(o.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),o._fromList=y}).call(this,n(0),n(4))},function(e,t,n){e.exports=n(12).EventEmitter},function(e,t,n){function r(e,t){e.emit("error",t)}var i=n(6);e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i.nextTick(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(f.isEncoding===p||!p(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=a,this.end=s,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=c,t=3;break;default:return this.write=l,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function a(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}var f=n(7).Buffer,p=f.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},r.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=i(t[r]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--r<n||-2===o?0:(o=i(t[r]))>=0?(o>0&&(e.lastNeed=o-2),o):--r<n||-2===o?0:(o=i(t[r]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);a.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",i)}function i(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){o(e,t,n)}):o(this,null,null)}function o(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=r;var a=n(1),s=n(5);s.inherits=n(2),s.inherits(r,a),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},r.prototype._destroy=function(e,t){var n=this;a.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.bufFromString=function(t){var n=e.byteLength(t),r=e.allocUnsafe?e.allocUnsafe(n):new e(n);return r.write(t),r},t.emptyBuffer=function(){return e.allocUnsafe?e.allocUnsafe(0):new e(0)},t.filterArray=function(e,t){for(var n=[],r=0;r<e.length;r++)t.indexOf(r)>-1&&n.push(e[r]);return n},t.trimLeft=String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.replace(/^\s+/,"")},t.trimRight=String.prototype.trimRight?function(e){return e.trimRight()}:function(e){return e.replace(/\s+$/,"")}}).call(this,n(3).Buffer)},function(e,t,n){var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n,r){var i=e.call(this,"Error: "+t+". JSON Line number: "+n+(r?" near: "+r:""))||this;return i.err=t,i.line=n,i.extra=r,i.name="CSV Parse Error",i}return r(t,e),t.column_mismatched=function(e,n){return new t("column_mismatched",e,n)},t.unclosed_quote=function(e,n){return new t("unclosed_quote",e,n)},t.fromJSON=function(e){return new t(e.err,e.line,e.extra)},t.prototype.toJSON=function(){return{err:this.err,line:this.line,extra:this.extra}},t}(Error);t.default=i},function(e,t,n){var r=n(18),i=n(68),o=n(69),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){e.exports=n(33)},function(e,t,n){var r=n(34),i=function(e,t){return new r.Converter(e,t)};i.csv=i,i.Converter=r.Converter,e.exports=i},function(e,t,n){(function(e){var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),a=n(50),s=n(51),u=i(n(15)),c=n(52),l=n(105),h=function(t){function i(n,r){void 0===r&&(r={});var i=t.call(this,r)||this;return i.options=r,i.params=a.mergeParams(n),i.runtime=s.initParseRuntime(i),i.result=new l.Result(i),i.processor=new c.ProcessorLocal(i),i.once("error",function(t){e(function(){i.result.processError(t),i.emit("done",t)})}),i.once("done",function(){i.processor.destroy()}),i}return r(i,t),i.prototype.preRawData=function(e){return this.runtime.preRawDataHook=e,this},i.prototype.preFileLine=function(e){return this.runtime.preFileLineHook=e,this},i.prototype.subscribe=function(e,t,n){return this.parseRuntime.subscribe={onNext:e,onError:t,onCompleted:n},this},i.prototype.fromFile=function(e,t){var r=this,i=n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}());return i.exists(e,function(n){n?i.createReadStream(e,t).pipe(r):r.emit("error",new Error("File does not exist. Check to make sure the file path to your csv is correct."))}),this},i.prototype.fromStream=function(e){return e.pipe(this),this},i.prototype.fromString=function(e){e.toString();var t=new o.Readable,n=0;return t._read=function(t){if(n>=e.length)this.push(null);else{var r=e.substr(n,t);this.push(r),n+=t}},this.fromStream(t)},i.prototype.then=function(e,t){var n=this;return new u.default(function(r,i){n.parseRuntime.then={onfulfilled:function(t){r(e?e(t):t)},onrejected:function(e){t?r(t(e)):i(e)}}})},Object.defineProperty(i.prototype,"parseParam",{get:function(){return this.params},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parseRuntime",{get:function(){return this.runtime},enumerable:!0,configurable:!0}),i.prototype._transform=function(e,t,n){var r=this;this.processor.process(e).then(function(e){if(e.length>0)return r.runtime.started=!0,r.result.processResult(e)}).then(function(){r.emit("drained"),n()},function(e){r.runtime.hasError=!0,r.runtime.error=e,r.emit("error",e),n()})},i.prototype._flush=function(e){var t=this;this.processor.flush().then(function(e){if(e.length>0)return t.result.processResult(e)}).then(function(){t.processEnd(e)},function(n){t.emit("error",n),e()})},i.prototype.processEnd=function(e){this.result.endProcess(),this.emit("done"),e()},Object.defineProperty(i.prototype,"parsedLineNumber",{get:function(){return this.runtime.parsedLineNumber},enumerable:!0,configurable:!0}),i}(o.Transform);t.Converter=h}).call(this,n(11).setImmediate)},function(e,t,n){(function(e,t){!function(e,n){function r(e){delete s[e]}function i(e){if(u)setTimeout(i,0,e);else{var t=s[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{r(e),u=!1}}}}if(!e.setImmediate){var o,a=1,s={},u=!1,c=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick(function(){i(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},o=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;o=function(t){var n=c.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():o=function(e){setTimeout(i,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return s[a]=r,o(a),a++},l.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(0),n(4))},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(12).EventEmitter;n(2)(r,i),r.Readable=n(13),r.Writable=n(46),r.Duplex=n(47),r.Transform=n(48),r.PassThrough=n(49),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,e.end())}function a(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),e.on("error",s),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}function o(e,t,n){for(var r,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(i(r));return o.join("")}t.byteLength=function(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){for(var t,n=r(e),i=n[0],o=n[1],a=new u(3*(i+o)/4-o),c=0,l=o>0?i-4:i,h=0;h<l;h+=4)t=s[e.charCodeAt(h)]<<18|s[e.charCodeAt(h+1)]<<12|s[e.charCodeAt(h+2)]<<6|s[e.charCodeAt(h+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;return 2===o&&(t=s[e.charCodeAt(h)]<<2|s[e.charCodeAt(h+1)]>>4,a[c++]=255&t),1===o&&(t=s[e.charCodeAt(h)]<<10|s[e.charCodeAt(h+1)]<<4|s[e.charCodeAt(h+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t),a},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],s=0,u=n-r;s<u;s+=16383)i.push(o(e,s,s+16383>u?u:s+16383));return 1===r?(t=e[n-1],i.push(a[t>>2]+a[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"=")),i.join("")};for(var a=[],s=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,h=c.length;l<h;++l)a[l]=c[l],s[c.charCodeAt(l)]=l;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=e[t+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=d,a/=256,c-=8);e[n+p-d]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){},function(e,t,n){function r(e,t,n){e.copy(t,n)}var i=n(7).Buffer,o=n(43);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),n=this.head,o=0;n;)r(n.data,t,o),o+=n.data.length,n=n.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(0))},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}e.exports=r;var i=n(27),o=n(5);o.inherits=n(2),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(14)},function(e,t,n){e.exports=n(1)},function(e,t,n){e.exports=n(13).Transform},function(e,t,n){e.exports=n(13).PassThrough},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.mergeParams=function(e){var t={delimiter:",",ignoreColumns:void 0,includeColumns:void 0,quote:'"',trim:!0,checkType:!1,ignoreEmpty:!1,noheader:!1,headers:void 0,flatKeys:!1,maxRowLength:0,checkColumn:!1,escape:'"',colParser:{},eol:void 0,alwaysSplitAtEOL:!1,output:"json",nullObject:!1,downstreamFormat:"line",needEmitAll:!0};for(var n in e||(e={}),e)e.hasOwnProperty(n)&&(Array.isArray(e[n])?t[n]=[].concat(e[n]):t[n]=e[n]);return t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.initParseRuntime=function(e){var t=e.parseParam,n={needProcessIgnoreColumn:!1,needProcessIncludeColumn:!1,selectedColumns:void 0,ended:!1,hasError:!1,error:void 0,delimiter:e.parseParam.delimiter,eol:e.parseParam.eol,columnConv:[],headerType:[],headerTitle:[],headerFlag:[],headers:void 0,started:!1,parsedLineNumber:0,columnValueSetter:[]};return t.ignoreColumns&&(n.needProcessIgnoreColumn=!0),t.includeColumns&&(n.needProcessIncludeColumn=!0),n}},function(e,t,n){(function(e){var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(53),a=i(n(15)),s=n(54),u=i(n(16)),c=n(57),l=n(28),h=n(58),f=i(n(59)),p=i(n(29)),d=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.rowSplit=new h.RowSplit(e.converter),e.eolEmitted=!1,e._needEmitEol=void 0,e.headEmitted=!1,e._needEmitHead=void 0,e}return r(n,t),n.prototype.flush=function(){var e=this;if(this.runtime.csvLineBuffer&&this.runtime.csvLineBuffer.length>0){var t=this.runtime.csvLineBuffer;return this.runtime.csvLineBuffer=void 0,this.process(t,!0).then(function(t){return e.runtime.csvLineBuffer&&e.runtime.csvLineBuffer.length>0?a.default.reject(p.default.unclosed_quote(e.runtime.parsedLineNumber,e.runtime.csvLineBuffer.toString())):a.default.resolve(t)})}return a.default.resolve([])},n.prototype.destroy=function(){return a.default.resolve()},Object.defineProperty(n.prototype,"needEmitEol",{get:function(){return void 0===this._needEmitEol&&(this._needEmitEol=this.converter.listeners("eol").length>0),this._needEmitEol},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"needEmitHead",{get:function(){return void 0===this._needEmitHead&&(this._needEmitHead=this.converter.listeners("header").length>0),this._needEmitHead},enumerable:!0,configurable:!0}),n.prototype.process=function(e,t){var n,r=this;return void 0===t&&(t=!1),n=t?e.toString():s.prepareData(e,this.converter.parseRuntime),a.default.resolve().then(function(){return r.runtime.preRawDataHook?r.runtime.preRawDataHook(n):n}).then(function(e){return e&&e.length>0?r.processCSV(e,t):a.default.resolve([])})},n.prototype.processCSV=function(e,t){var n=this,r=this.params,i=this.runtime;i.eol||u.default(e,i),this.needEmitEol&&!this.eolEmitted&&i.eol&&(this.converter.emit("eol",i.eol),this.eolEmitted=!0),r.ignoreEmpty&&!i.started&&(e=l.trimLeft(e));var o=c.stringToLines(e,i);return t?(o.lines.push(o.partial),o.partial=""):this.prependLeftBuf(l.bufFromString(o.partial)),o.lines.length>0?(i.preFileLineHook?this.runPreLineHook(o.lines):a.default.resolve(o.lines)).then(function(e){return i.started||n.runtime.headers?n.processCSVBody(e):n.processDataWithHead(e)}):a.default.resolve([])},n.prototype.processDataWithHead=function(e){if(this.params.noheader)this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=[];else{for(var t="",n=[];e.length;){var r=t+e.shift(),i=this.rowSplit.parse(r);if(i.closed){n=i.cells,t="";break}t=r+u.default(r,this.runtime)}if(this.prependLeftBuf(l.bufFromString(t)),0===n.length)return[];this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=n}return(this.runtime.needProcessIgnoreColumn||this.runtime.needProcessIncludeColumn)&&this.filterHeader(),this.needEmitHead&&!this.headEmitted&&(this.converter.emit("header",this.runtime.headers),this.headEmitted=!0),this.processCSVBody(e)},n.prototype.filterHeader=function(){if(this.runtime.selectedColumns=[],this.runtime.headers){for(var e=this.runtime.headers,t=0;t<e.length;t++)if(this.params.ignoreColumns)if(this.params.ignoreColumns.test(e[t])){if(!this.params.includeColumns||!this.params.includeColumns.test(e[t]))continue;this.runtime.selectedColumns.push(t)}else this.runtime.selectedColumns.push(t);else this.params.includeColumns?this.params.includeColumns.test(e[t])&&this.runtime.selectedColumns.push(t):this.runtime.selectedColumns.push(t);this.runtime.headers=l.filterArray(this.runtime.headers,this.runtime.selectedColumns)}},n.prototype.processCSVBody=function(e){if("line"===this.params.output)return e;var t=this.rowSplit.parseMultiLines(e);return this.prependLeftBuf(l.bufFromString(t.partial)),"csv"===this.params.output?t.rowsCells:f.default(t.rowsCells,this.converter)},n.prototype.prependLeftBuf=function(t){t&&(this.runtime.csvLineBuffer?this.runtime.csvLineBuffer=e.concat([t,this.runtime.csvLineBuffer]):this.runtime.csvLineBuffer=t)},n.prototype.runPreLineHook=function(e){var t=this;return new a.default(function(n,r){!function e(t,n,r,i){if(r>=t.length)i();else if(n.preFileLineHook){var o=t[r],a=n.preFileLineHook(o,n.parsedLineNumber+r);if(r++,a&&a.then)a.then(function(o){t[r-1]=o,e(t,n,r,i)});else{for(t[r-1]=a;r<t.length;)t[r]=n.preFileLineHook(t[r],n.parsedLineNumber+r),r++;i()}}else i()}(e,t.runtime,0,function(t){t?r(t):n(e)})})},n}(o.Processor);t.ProcessorLocal=d}).call(this,n(3).Buffer)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.converter=e,this.params=e.parseParam,this.runtime=e.parseRuntime};t.Processor=r},function(e,t,n){(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(55));t.prepareData=function(t,n){var r=function(t,n){return n.csvLineBuffer&&n.csvLineBuffer.length>0?e.concat([n.csvLineBuffer,t]):t}(t,n);n.csvLineBuffer=void 0;var o=function(e,t){var n=e.length-1;if(0!=(128&e[n])){for(;128==(192&e[n]);)n--;n--}return n!=e.length-1?(t.csvLineBuffer=e.slice(n+1),e.slice(0,n+1)):e}(r,n).toString("utf8");return!1===n.started?i.default(o):o}}).call(this,n(3).Buffer)},function(e,t,n){(function(t){var r=n(56);e.exports=function(e){return"string"==typeof e&&65279===e.charCodeAt(0)?e.slice(1):t.isBuffer(e)&&r(e)&&239===e[0]&&187===e[1]&&191===e[2]?e.slice(3):e}}).call(this,n(3).Buffer)},function(e,t){e.exports=function(e){for(var t=0;t<e.length;)if(9==e[t]||10==e[t]||13==e[t]||32<=e[t]&&e[t]<=126)t+=1;else if(194<=e[t]&&e[t]<=223&&128<=e[t+1]&&e[t+1]<=191)t+=2;else if(224==e[t]&&160<=e[t+1]&&e[t+1]<=191&&128<=e[t+2]&&e[t+2]<=191||(225<=e[t]&&e[t]<=236||238==e[t]||239==e[t])&&128<=e[t+1]&&e[t+1]<=191&&128<=e[t+2]&&e[t+2]<=191||237==e[t]&&128<=e[t+1]&&e[t+1]<=159&&128<=e[t+2]&&e[t+2]<=191)t+=3;else{if(!(240==e[t]&&144<=e[t+1]&&e[t+1]<=191&&128<=e[t+2]&&e[t+2]<=191&&128<=e[t+3]&&e[t+3]<=191||241<=e[t]&&e[t]<=243&&128<=e[t+1]&&e[t+1]<=191&&128<=e[t+2]&&e[t+2]<=191&&128<=e[t+3]&&e[t+3]<=191||244==e[t]&&128<=e[t+1]&&e[t+1]<=143&&128<=e[t+2]&&e[t+2]<=191&&128<=e[t+3]&&e[t+3]<=191))return!1;t+=4}return!0}},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(16));t.stringToLines=function(e,t){var n=i.default(e,t),r=e.split(n);return{lines:r,partial:r.pop()||""}}},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(16)),o=n(28),a=[",","|","\t",";",":"],s=function(){function e(e){this.conv=e,this.cachedRegExp={},this.delimiterEmitted=!1,this._needEmitDelimiter=void 0,this.quote=e.parseParam.quote,this.trim=e.parseParam.trim,this.escape=e.parseParam.escape}return Object.defineProperty(e.prototype,"needEmitDelimiter",{get:function(){return void 0===this._needEmitDelimiter&&(this._needEmitDelimiter=this.conv.listeners("delimiter").length>0),this._needEmitDelimiter},enumerable:!0,configurable:!0}),e.prototype.parse=function(e){if(0===e.length||this.conv.parseParam.ignoreEmpty&&0===e.trim().length)return{cells:[],closed:!0};var t=this.quote,n=this.trim;this.escape,(this.conv.parseRuntime.delimiter instanceof Array||"auto"===this.conv.parseRuntime.delimiter.toLowerCase())&&(this.conv.parseRuntime.delimiter=this.getDelimiter(e)),this.needEmitDelimiter&&!this.delimiterEmitted&&(this.conv.emit("delimiter",this.conv.parseRuntime.delimiter),this.delimiterEmitted=!0);var r=this.conv.parseRuntime.delimiter,i=e.split(r);if("off"===t){if(n)for(var o=0;o<i.length;o++)i[o]=i[o].trim();return{cells:i,closed:!0}}return this.toCSVRow(i,n,t,r)},e.prototype.toCSVRow=function(e,t,n,r){for(var i=[],a=!1,s="",u=0,c=e.length;u<c;u++){var l=e[u];!a&&t&&(l=o.trimLeft(l));var h=l.length;if(a)this.isQuoteClose(l)?(a=!1,s+=r+(l=l.substr(0,h-1)),s=this.escapeQuote(s),t&&(s=o.trimRight(s)),i.push(s),s=""):s+=r+l;else{if(2===h&&l===this.quote+this.quote){i.push("");continue}if(this.isQuoteOpen(l)){if(l=l.substr(1),this.isQuoteClose(l)){l=l.substring(0,l.lastIndexOf(n)),l=this.escapeQuote(l),i.push(l);continue}if(-1!==l.indexOf(n)){for(var f=0,p="",d=0,v=l;d<v.length;d++){var y=v[d];y===n&&p!==this.escape?(f++,p=""):p=y}if(f%2==1){t&&(l=o.trimRight(l)),i.push(n+l);continue}a=!0,s+=l;continue}a=!0,s+=l;continue}t&&(l=o.trimRight(l)),i.push(l)}}return{cells:i,closed:!a}},e.prototype.getDelimiter=function(e){var t;if("auto"===this.conv.parseParam.delimiter)t=a;else{if(!(this.conv.parseParam.delimiter instanceof Array))return this.conv.parseParam.delimiter;t=this.conv.parseParam.delimiter}var n=0,r=",";return t.forEach(function(t){var i=e.split(t).length;i>n&&(r=t,n=i)}),r},e.prototype.isQuoteOpen=function(e){var t=this.quote,n=this.escape;return e[0]===t&&(e[1]!==t||e[1]===n&&(e[2]===t||2===e.length))},e.prototype.isQuoteClose=function(e){var t=this.quote,n=this.escape;this.conv.parseParam.trim&&(e=o.trimRight(e));for(var r=0,i=e.length-1;e[i]===t||e[i]===n;)i--,r++;return r%2!=0},e.prototype.escapeQuote=function(e){var t="es|"+this.quote+"|"+this.escape;void 0===this.cachedRegExp[t]&&(this.cachedRegExp[t]=new RegExp("\\"+this.escape+"\\"+this.quote,"g"));var n=this.cachedRegExp[t];return e.replace(n,this.quote)},e.prototype.parseMultiLines=function(e){for(var t=[],n="";e.length;){var r=n+e.shift(),a=this.parse(r);0===a.cells.length&&this.conv.parseParam.ignoreEmpty||(a.closed||this.conv.parseParam.alwaysSplitAtEOL?(this.conv.parseRuntime.selectedColumns?t.push(o.filterArray(a.cells,this.conv.parseRuntime.selectedColumns)):t.push(a.cells),n=""):n=r+(i.default(r,this.conv.parseRuntime)||"\n"))}return{rowsCells:t,partial:n}},e}();t.RowSplit=s},function(e,t,n){function i(e,t,n){if(t.parseParam.checkColumn&&t.parseRuntime.headers&&e.length!==t.parseRuntime.headers.length)throw d.default.column_mismatched(t.parseRuntime.parsedLineNumber+n);return function(e,t,n){for(var r=!1,i={},s=0,u=e.length;s<u;s++){var l=e[s];if(!n.parseParam.ignoreEmpty||""!==l){r=!0;var h=t[s];h&&""!==h||(h=t[s]="field"+(s+1));var f=o(h,s,n);if(f){var p=f(l,h,i,e,s);void 0!==p&&a(i,h,p,n,s)}else n.parseParam.checkType&&(l=c(l,h,s,n)(l)),void 0!==l&&a(i,h,l,n,s)}}return r?i:null}(e,t.parseRuntime.headers||[],t)||null}function o(e,t,n){if(void 0!==n.parseRuntime.columnConv[t])return n.parseRuntime.columnConv[t];var i=n.parseParam.colParser[e];if(void 0===i)return n.parseRuntime.columnConv[t]=null;if("object"==(void 0===i?"undefined":r(i))&&(i=i.cellParser||"string"),"string"==typeof i){i=i.trim().toLowerCase();var o=m[i];return n.parseRuntime.columnConv[t]=o||null}return n.parseRuntime.columnConv[t]="function"==typeof i?i:null}function a(e,t,n,r,i){if(!r.parseRuntime.columnValueSetter[i])if(r.parseParam.flatKeys)r.parseRuntime.columnValueSetter[i]=s;else if(t.indexOf(".")>-1){for(var o=t.split("."),a=!0;o.length>0;)if(0===o.shift().length){a=!1;break}!a||r.parseParam.colParser[t]&&r.parseParam.colParser[t].flat?r.parseRuntime.columnValueSetter[i]=s:r.parseRuntime.columnValueSetter[i]=u}else r.parseRuntime.columnValueSetter[i]=s;!0===r.parseParam.nullObject&&"null"===n&&(n=null),r.parseRuntime.columnValueSetter[i](e,t,n)}function s(e,t,n){e[t]=n}function u(e,t,n){v.default(e,t,n)}function c(e,t,n,r){return r.parseRuntime.headerType[n]?r.parseRuntime.headerType[n]:t.indexOf("number#!")>-1?r.parseRuntime.headerType[n]=l:t.indexOf("string#!")>-1?r.parseRuntime.headerType[n]=h:r.parseParam.checkType?r.parseRuntime.headerType[n]=f:r.parseRuntime.headerType[n]=h}function l(e){var t=parseFloat(e);return isNaN(t)?e:t}function h(e){return e.toString()}function f(e){var t=e.trim();return""===t?h(e):y.test(t)?l(e):5===t.length&&"false"===t.toLowerCase()||4===t.length&&"true"===t.toLowerCase()?function(e){var t=e.trim();return 5!==t.length||"false"!==t.toLowerCase()}(e):"{"===t[0]&&"}"===t[t.length-1]||"["===t[0]&&"]"===t[t.length-1]?function(e){try{return JSON.parse(e)}catch(t){return e}}(e):h(e)}var p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=p(n(29)),v=p(n(60)),y=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/;t.default=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var a=i(e[r],t,r);a&&n.push(a)}return n};var m={string:h,number:l,omit:function(){}}},function(e,t,n){var r=n(61);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},function(e,t,n){var r=n(62),i=n(74),o=n(103),a=n(20),s=n(104);e.exports=function(e,t,n,u){if(!a(e))return e;for(var c=-1,l=(t=i(t,e)).length,h=l-1,f=e;null!=f&&++c<l;){var p=s(t[c]),d=n;if(c!=h){var v=f[p];void 0===(d=u?u(v,p,f):void 0)&&(d=a(v)?v:o(t[c+1])?[]:{})}r(f,p,d),f=f[p]}return e}},function(e,t,n){var r=n(63),i=n(31),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(64);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(17),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){var r=n(66),i=n(70),o=n(20),a=n(72),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?f:s).test(a(e))}},function(e,t,n){var r=n(30),i=n(20);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){(function(t){var n="object"==(void 0===t?"undefined":r(t))&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(0))},function(e,t,n){var r=n(18),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(71),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(19)["__core-js_shared__"];e.exports=r},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(21),i=n(75),o=n(77),a=n(100);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,n){var i=n(21),o=n(22),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(i(e))return!1;var n=void 0===e?"undefined":r(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||s.test(e)||!a.test(e)||null!=t&&e in Object(t)}},function(e,t){e.exports=function(e){return null!=e&&"object"==(void 0===e?"undefined":r(e))}},function(e,t,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=n(78)(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)}),t});e.exports=o},function(e,t,n){var r=n(79);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(r.Cache||i),n}var i=n(80),o="Expected a function";r.Cache=i,e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(81),o=n(95),a=n(97),s=n(98),u=n(99);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(82),i=n(88),o=n(94);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(83),o=n(84),a=n(85),s=n(86),u=n(87);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(8);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(8),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(8),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(8);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(89),o=n(90),a=n(91),s=n(92),u=n(93);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(9),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(9);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(9);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(9);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(17)(n(19),"Map");e.exports=r},function(e,t,n){var r=n(10);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=void 0===e?"undefined":r(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(10);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(10);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(10);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(101);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(18),i=n(102),o=n(21),a=n(22),s=r?r.prototype:void 0,u=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=void 0===e?"undefined":r(e);return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(22);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){function i(e,t){if("object"!=(void 0===t?"undefined":r(t))||e.options.objectMode)e.push(t);else{var n=JSON.stringify(t);e.push(n+("array"===e.parseParam.downstreamFormat?","+s.EOL:s.EOL),"utf8")}}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(15)),s=n(106),u=function(){function e(e){this.converter=e,this.finalResult=[]}return Object.defineProperty(e.prototype,"needEmitLine",{get:function(){return!!this.converter.parseRuntime.subscribe&&!!this.converter.parseRuntime.subscribe.onNext||this.needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needPushDownstream",{get:function(){return void 0===this._needPushDownstream&&(this._needPushDownstream=this.converter.listeners("data").length>0||this.converter.listeners("readable").length>0),this._needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needEmitAll",{get:function(){return!!this.converter.parseRuntime.then&&this.converter.parseParam.needEmitAll},enumerable:!0,configurable:!0}),e.prototype.processResult=function(e){var t=this,n=this.converter.parseRuntime.parsedLineNumber;return this.needPushDownstream&&"array"===this.converter.parseParam.downstreamFormat&&0===n&&i(this.converter,"["+s.EOL),new a.default(function(n,r){t.needEmitLine?function e(t,n,r,o,a){if(r>=t.length)a();else if(n.parseRuntime.subscribe&&n.parseRuntime.subscribe.onNext){var s=n.parseRuntime.subscribe.onNext,u=t[r],c=s(u,n.parseRuntime.parsedLineNumber+r);if(r++,c&&c.then)c.then(function(){!function(t,n,r,o,a,s,u){a&&i(r,u),e(t,r,o,a,s)}(t,0,n,r,o,a,u)},a);else{for(o&&i(n,u);r<t.length;){var l=t[r];s(l,n.parseRuntime.parsedLineNumber+r),r++,o&&i(n,l)}a()}}else{if(o)for(;r<t.length;)l=t[r++],i(n,l);a()}}(e,t.converter,0,t.needPushDownstream,function(i){i?r(i):(t.appendFinalResult(e),n())}):(t.appendFinalResult(e),n())})},e.prototype.appendFinalResult=function(e){this.needEmitAll&&(this.finalResult=this.finalResult.concat(e)),this.converter.parseRuntime.parsedLineNumber+=e.length},e.prototype.processError=function(e){this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onError&&this.converter.parseRuntime.subscribe.onError(e),this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onrejected&&this.converter.parseRuntime.then.onrejected(e)},e.prototype.endProcess=function(){this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onfulfilled&&(this.needEmitAll?this.converter.parseRuntime.then.onfulfilled(this.finalResult):this.converter.parseRuntime.then.onfulfilled([])),this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onCompleted&&this.converter.parseRuntime.subscribe.onCompleted(),this.needPushDownstream&&"array"===this.converter.parseParam.downstreamFormat&&i(this.converter,"]"+s.EOL)},e}();t.Result=u},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}}])}])});
//# sourceMappingURL=web.js.map